(()=>{var e={};e.id=626,e.ids=[626],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3808:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(4687),r(7449),r(5866);var s=r(3191),a=r(8716),i=r(7922),n=r.n(i),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4687)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7449)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/login/page.tsx"],u="/login/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9860:(e,t,r)=>{Promise.resolve().then(r.bind(r,6631))},6631:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(326),a=r(5047),i=r(3136),n=r(130),l=r(7577),o=r(434),c=r(3991),d=r(1135);function u({id:e,label:t,type:r="text",value:a,onChange:i,placeholder:n,required:l,error:o,helperText:c,autoComplete:u}){return(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:e,className:"label",children:t}),s.jsx("input",{id:e,type:r,value:a,onChange:i,placeholder:n,autoComplete:u,required:l,"aria-invalid":!!o,"aria-describedby":o?`${e}-error`:c?`${e}-help`:void 0,className:(0,d.Z)("input",o&&"input-invalid")}),o?s.jsx("p",{id:`${e}-error`,role:"alert",className:"error-text mt-1",children:o}):c?s.jsx("p",{id:`${e}-help`,className:"helper mt-1",children:c}):null]})}let p=(0,r(2881).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var x=r(2714);function m(e){let[t,r]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"relative",children:[s.jsx(u,{...e,type:t?"text":"password"}),s.jsx("button",{type:"button",onClick:()=>r(e=>!e),"aria-label":t?"Hide password":"Show password",className:"absolute right-3 top-[38px] text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",children:t?s.jsx(p,{size:18}):s.jsx(x.Z,{size:18})})]})}var h=r(3679);function f(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)().get("next")||"/",{login:r,setSchoolId:d}=(0,i.a)(),[p,x]=(0,l.useState)(""),[f,g]=(0,l.useState)(""),[j,v]=(0,l.useState)(null),[y,b]=(0,l.useState)(!1);async function w(s){s.preventDefault(),v(null),b(!0);try{let s=await n.O.login({email:p,password:f}),a=s?.access_token;if(!a)throw console.error("Login response:",s),Error("No access token in response");let i=await r({token:a});if(!(i.roles?.includes("TESTER")||i.permissions?.is_admin||i.permissions?.is_super_admin)){v("Access denied. Please contact an administrator to request access.");return}let l=s?.school_id;l&&d(l.toString()),i.roles?.includes("TESTER")?e.replace("/tester"):i.permissions?.is_admin||i.permissions?.is_super_admin?e.replace("/admin"):l?e.replace(t):e.replace(`/onboarding/school?next=${encodeURIComponent(t)}`)}catch(e){console.error("Login error:",e),v(e?.response?.data?.detail||e?.message||"Login failed")}finally{b(!1)}}return(0,s.jsxs)(c.default,{title:"Welcome back",subtitle:"Sign in to manage your school",children:[(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",noValidate:!0,children:[s.jsx(u,{id:"email",label:"Email",type:"email",value:p,onChange:e=>x(e.target.value),placeholder:"email address",autoComplete:"email",required:!0}),s.jsx(m,{id:"password",label:"Password",value:f,onChange:e=>g(e.target.value),placeholder:"Password",autoComplete:"current-password",required:!0}),s.jsx(h.default,{className:"w-full",disabled:y,children:y?"Signing inâ€¦":"Continue"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mt-4",children:[s.jsx(o.default,{href:"/forgot-password",className:"link",children:"Forgot password?"}),(0,s.jsxs)("span",{className:"opacity-80",children:["Don't have an account? ",s.jsx("a",{href:"https://olaji.co/signup",className:"link",target:"_blank",rel:"noopener noreferrer",children:"Create one"})]})]}),j&&s.jsx("p",{className:"error-text mt-3",role:"alert","aria-live":"polite",children:j})]})}function g(){return s.jsx(l.Suspense,{fallback:s.jsx("div",{children:"Loading..."}),children:s.jsx(f,{})})}},3991:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(326),a=r(246);function i(){return s.jsx("nav",{className:"w-full",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center h-16",children:[s.jsx("div",{className:"w-full md:w-auto flex justify-center md:justify-start",children:s.jsx(a.D2,{})}),s.jsx("div",{className:"hidden md:flex items-center space-x-4 ml-auto"})]})})})}function n({children:e,title:t,subtitle:r}){return(0,s.jsxs)("div",{className:"min-h-screen",children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:s.jsx(i,{})}),s.jsx("div",{className:"min-h-screen flex items-center justify-center px-6 py-12",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[s.jsx("h1",{className:"text-3xl font-semibold mb-2",children:t}),r&&s.jsx("p",{className:"text-lg text-neutral-600 dark:text-neutral-400",children:r})]}),s.jsx("div",{className:"card p-6",children:e})]})})]})}},3679:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(326),a=r(1135);function i({className:e,children:t,...r}){return s.jsx("button",{className:(0,a.Z)("btn-primary",e),...r,children:t})}},2714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4687:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var s=r(8570);let a=(0,s.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/login/page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let l=(0,s.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/login/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[226,328,657],()=>r(3808));module.exports=s})();