(()=>{var e={};e.id=605,e.ids=[605],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7529:()=>{},8982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(2624),s(7449),s(5866);var r=s(3191),a=s(8716),o=s(7922),i=s.n(o),n=s(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["onboarding",{children:["school",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2624)),"/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/app/onboarding/school/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7449)),"/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/app/onboarding/school/page.tsx"],u="/onboarding/school/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/onboarding/school/page",pathname:"/onboarding/school",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2189:(e,t,s)=>{Promise.resolve().then(s.bind(s,3136))},4293:(e,t,s)=>{Promise.resolve().then(s.bind(s,9498))},1625:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},9498:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(326),a=s(5047),o=s(7577),i=s(4986),n=s(3136);function l(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)().get("next")||"/",{setSchoolId:s}=(0,n.a)(),l=new Date().getFullYear(),c=`${l}-01-01`,[d,u]=(0,o.useState)({name:"",short_code:"",email:"",phone:"",address:"",currency:"KES",academic_year_start:c}),[h,m]=(0,o.useState)(!1),[p,x]=(0,o.useState)(null);async function g(r){if(r.preventDefault(),x(null),!d.name.trim())return x("School name is required");if(!d.academic_year_start)return x("Academic year start date is required");m(!0);try{let r=await (0,i.TX)({name:d.name.trim(),short_code:d.short_code||void 0,email:d.email||void 0,phone:d.phone||void 0,address:d.address||void 0,currency:d.currency||void 0,academic_year_start:d.academic_year_start});s(r.id.toString()),e.push(t)}catch(e){x(e?.response?.data?.detail||"Failed to create school")}finally{m(!1)}}return r.jsx("div",{className:"min-h-screen grid place-items-center p-6",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl card p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Create your school"}),r.jsx("p",{className:"text-sm opacity-70",children:"Let's set up the basics before you start managing students and fees."})]}),(0,r.jsxs)("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"School name *"}),r.jsx("input",{className:"input mt-1",value:d.name,onChange:e=>u({...d,name:e.target.value}),placeholder:"e.g., Imara Primary School",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Short code"}),r.jsx("input",{className:"input mt-1",value:d.short_code,onChange:e=>u({...d,short_code:e.target.value.toUpperCase()}),placeholder:"IMARA",maxLength:10}),r.jsx("p",{className:"text-xs opacity-60 mt-1",children:"Used for reports and student IDs"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Official email"}),r.jsx("input",{type:"email",className:"input mt-1",value:d.email,onChange:e=>u({...d,email:e.target.value}),placeholder:"admin@school.ke"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Phone"}),r.jsx("input",{type:"tel",className:"input mt-1",value:d.phone,onChange:e=>u({...d,phone:e.target.value}),placeholder:"+254..."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Currency"}),(0,r.jsxs)("select",{className:"input mt-1",value:d.currency,onChange:e=>u({...d,currency:e.target.value}),children:[r.jsx("option",{value:"KES",children:"KES - Kenyan Shilling"}),r.jsx("option",{value:"USD",children:"USD - US Dollar"}),r.jsx("option",{value:"UGX",children:"UGX - Ugandan Shilling"}),r.jsx("option",{value:"TZS",children:"TZS - Tanzanian Shilling"})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Address"}),r.jsx("input",{className:"input mt-1",value:d.address,onChange:e=>u({...d,address:e.target.value}),placeholder:"School address / Location"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Academic year start date *"}),r.jsx("input",{type:"date",className:"input mt-1",value:d.academic_year_start,onChange:e=>u({...d,academic_year_start:e.target.value}),required:!0}),r.jsx("p",{className:"text-xs opacity-60 mt-1",children:"This sets up your academic calendar and determines when terms begin. Most Kenyan schools start in January."})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:h||!d.name.trim()||!d.academic_year_start,children:h?"Creating school & setting up academic calendarâ€¦":"Create school"})}),p&&r.jsx("div",{className:"md:col-span-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-3 rounded",children:p})]})]})})}function c(){return r.jsx(o.Suspense,{fallback:r.jsx("div",{children:"Loading..."}),children:r.jsx(l,{})})}},3136:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>n,a:()=>l});var r=s(326),a=s(7577),o=s(5047);let i=(0,a.createContext)({token:null,active_school_id:null,isLoading:!0,login:async()=>{},logout:()=>{},setSchoolId:()=>{},isAuthenticated:!1});function n({children:e}){let[t,s]=(0,a.useState)({token:null,active_school_id:null,isLoading:!0}),n=(0,o.useRouter)(),l=async e=>{localStorage.setItem("token",e.token),s(t=>({...t,token:e.token,isLoading:!1}))},c={...t,login:l,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),s({token:null,active_school_id:null,isLoading:!1}),n.replace("/login")},setSchoolId:e=>{localStorage.setItem("active_school_id",e),s(t=>({...t,active_school_id:e}))},isAuthenticated:!!t.token&&!t.isLoading};return r.jsx(i.Provider,{value:c,children:e})}let l=()=>(0,a.useContext)(i)},2374:(e,t,s)=>{"use strict";s.d(t,{h:()=>r});let r=s(4099).Z.create({baseURL:"http://localhost:8000",timeout:2e4});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.error("Unauthorized request detected"),localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),window.location.href="/login"),Promise.reject(e)))},4986:(e,t,s)=>{"use strict";s.d(t,{TX:()=>o,Yu:()=>a});var r=s(2374);let a={async list(){let{data:e}=await r.h.get("/api/schools");return e},async mine(){let{data:e}=await r.h.get("/api/schools/mine");return e},async getActive(){let{data:e}=await r.h.get("/api/schools/active");return e},async create(e){let{data:t}=await r.h.post("/api/schools",e);return t},async get(e){let{data:t}=await r.h.get(`/api/schools/${e}`);return t},async getOverview(e){let{data:t}=await r.h.get("/api/schools/overview",{headers:{"X-School-ID":e}});return t},async update(e,t){let{data:s}=await r.h.put(`/api/schools/${e}`,t);return s},async getMobileDevices(e){let{data:t}=await r.h.get("/api/mobile/status",{headers:{"X-School-ID":e}});return t},async removeMobileDevice(e,t){let{data:s}=await r.h.delete(`/api/mobile/status/${t}`,{headers:{"X-School-ID":e}});return s},async getAllSchoolDevices(e){let{data:t}=await r.h.get("/api/mobile/debug/all-devices",{headers:{"X-School-ID":e}});return t}},o=a.create;a.list,a.get,a.getOverview,a.update,a.getMobileDevices,a.removeMobileDevice,a.getAllSchoolDevices},7449:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>c});var r=s(9510);s(7272),s(1159);var a=s(8570);let o=(0,a.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/contexts/AuthContext.tsx`),{__esModule:i,$$typeof:n}=o;o.default;let l=(0,a.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/contexts/AuthContext.tsx#AuthProvider`);(0,a.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/contexts/AuthContext.tsx#useAuth`);let c={title:"School Chat Alpha"};function d({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"min-h-svh bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 antialiased",children:r.jsx(l,{children:e})})})}},2624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>o,default:()=>n});var r=s(8570);let a=(0,r.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/app/onboarding/school/page.tsx`),{__esModule:o,$$typeof:i}=a;a.default;let n=(0,r.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/doneFrontend/app/onboarding/school/page.tsx#default`)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[845,99],()=>s(8982));module.exports=r})();