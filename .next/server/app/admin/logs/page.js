(()=>{var e={};e.id=757,e.ids=[757],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3099:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(377),t(596),t(7449),t(5866);var r=t(3191),a=t(8716),n=t(7922),l=t.n(n),i=t(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["admin",{children:["logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,377)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/logs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,596)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7449)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/logs/page.tsx"],x="/admin/logs/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/logs/page",pathname:"/admin/logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7667:(e,s,t)=>{Promise.resolve().then(t.bind(t,2802))},4505:(e,s,t)=>{Promise.resolve().then(t.bind(t,4469))},2802:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(326);t(7577);var a=t(3136),n=t(5047),l=t(7231);function i({children:e}){let{user:s,isLoading:t,isAuthenticated:i}=(0,a.a)();return((0,n.useRouter)(),t)?r.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading..."})]})}):i&&s&&(s.roles?.includes("ADMIN")||s.roles?.includes("SUPER_ADMIN")||s.permissions?.is_admin||s.permissions?.is_super_admin)?r.jsx(l.Z,{children:e}):null}t(506)},4469:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(326),a=t(7577),n=t(3136),l=t(2607);let i=(0,t(2881).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var d=t(9561),c=t(3679);function o(){let{user:e}=(0,n.a)(),[s,t]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[m,u]=(0,a.useState)("ALL"),[p,h]=(0,a.useState)({start:new Date(Date.now()-864e5).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),g="ALL"===m?s:s.filter(e=>e.level===m);return e?.permissions?.is_admin||e?.permissions?.is_super_admin?(0,r.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-2",children:"System Logs"}),r.jsx("p",{className:"text-sm sm:text-base text-neutral-600",children:"Monitor system activity and troubleshoot issues"})]}),(0,r.jsxs)(c.default,{className:"btn-secondary flex items-center gap-2 text-sm",children:[r.jsx(i,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:"Export Logs"}),r.jsx("span",{className:"sm:hidden",children:"Export"})]})]}),r.jsx("div",{className:"card p-3 sm:p-4 mb-4 sm:mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 items-end",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Log Level"}),(0,r.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"input w-full text-sm",children:[r.jsx("option",{value:"ALL",children:"All Levels"}),r.jsx("option",{value:"ERROR",children:"Error"}),r.jsx("option",{value:"WARN",children:"Warning"}),r.jsx("option",{value:"INFO",children:"Info"}),r.jsx("option",{value:"DEBUG",children:"Debug"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Start Date"}),r.jsx("input",{type:"date",value:p.start,onChange:e=>h(s=>({...s,start:e.target.value})),className:"input w-full text-sm"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"End Date"}),r.jsx("input",{type:"date",value:p.end,onChange:e=>h(s=>({...s,end:e.target.value})),className:"input w-full text-sm"})]}),r.jsx("div",{className:"sm:col-span-2 lg:col-span-1",children:(0,r.jsxs)(c.default,{className:"btn-secondary flex items-center gap-2 w-full sm:w-auto text-sm",children:[r.jsx(d.Z,{size:16}),"Apply Filters"]})})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsx(l.Z,{data:g,columns:[{key:"timestamp",label:"Time",render:e=>r.jsx("span",{className:"text-xs sm:text-sm",children:new Date(e).toLocaleString()}),width:"180px"},{key:"level",label:"Level",render:e=>r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"ERROR"===e?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":"WARN"===e?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"INFO"===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}`,children:e}),width:"80px"},{key:"message",label:"Message",render:e=>r.jsx("span",{className:"font-mono text-xs sm:text-sm break-words",children:e})},{key:"user_email",label:"User",render:e=>r.jsx("span",{className:"text-xs sm:text-sm",children:e||"-"}),width:"150px"},{key:"endpoint",label:"Endpoint",render:e=>r.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded break-all",children:e||"-"}),width:"120px"},{key:"ip_address",label:"IP Address",render:e=>r.jsx("code",{className:"text-xs",children:e||"-"}),width:"120px"}],loading:o,searchable:!0,searchPlaceholder:"Search logs...",emptyMessage:"No logs found for the selected criteria",className:"font-mono text-xs sm:text-sm"})})]}):r.jsx("div",{className:"p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-600",children:"You don't have permission to view system logs."})]})})}},3679:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var r=t(326),a=t(1135);function n({className:e,children:s,...t}){return r.jsx("button",{className:(0,a.Z)("btn-primary",e),...t,children:s})}},2607:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var r=t(326),a=t(7577),n=t(8307),l=t(1890);let i=(0,t(2881).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=t(3679);function c({data:e,columns:s,actions:t,loading:c=!1,searchable:o=!1,searchPlaceholder:x="Search...",pagination:m,emptyMessage:u="No data available",className:p=""}){let[h,g]=(0,a.useState)(""),[b,j]=(0,a.useState)(null),f=o?e.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(h.toLowerCase()))):e,v=b?[...f].sort((e,s)=>{let t=e[b.key],r=s[b.key];return t<r?"asc"===b.direction?-1:1:t>r?"asc"===b.direction?1:-1:0}):f,y=e=>{j(s=>s?.key===e?{key:e,direction:"asc"===s.direction?"desc":"asc"}:{key:e,direction:"asc"})},N=(e,s)=>{let t=e[s.key];return s.render?s.render(t,e):t};return c?r.jsx("div",{className:`h-full flex items-center justify-center ${p}`,children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[--color-brand]"}),r.jsx("p",{className:"mt-2 text-neutral-600",children:"Loading..."})]})}):(0,r.jsxs)("div",{className:`h-full flex flex-col bg-white dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-700 shadow-sm ${p}`,children:[o&&r.jsx("div",{className:"flex-none p-4 border-b border-neutral-200 dark:border-neutral-700",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:16}),r.jsx("input",{type:"text",placeholder:x,value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg  bg-white dark:bg-neutral-800 focus:ring-2 focus:ring-[--color-brand] focus:border-transparent text-sm"})]})}),r.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800 sticky top-0 z-10",children:(0,r.jsxs)("tr",{children:[s.map((e,s)=>r.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider
                    ${e.sortable?"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700":""}
                    ${e.width?"":"min-w-0"}`,style:e.width?{width:e.width,minWidth:e.width}:{},onClick:e.sortable?()=>y(String(e.key)):void 0,children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"truncate",children:e.label}),e.sortable&&b?.key===e.key&&r.jsx("span",{className:"text-[--color-brand] flex-shrink-0",children:"asc"===b.direction?"↑":"↓"})]})},s)),t&&t.length>0&&r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider w-32",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:0===v.length?r.jsx("tr",{children:r.jsx("td",{colSpan:s.length+(t?1:0),className:"px-4 py-8 text-center text-neutral-500 dark:text-neutral-400",children:u})}):v.map((e,a)=>(0,r.jsxs)("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-800/50",children:[s.map((s,t)=>r.jsx("td",{className:"px-4 py-3 text-sm text-neutral-900 dark:text-neutral-100",style:s.width?{width:s.width,minWidth:s.width}:{},children:r.jsx("div",{className:"min-w-0",children:N(e,s)})},t)),t&&t.length>0&&r.jsx("td",{className:"px-4 py-3 text-sm w-32",children:r.jsx("div",{className:"flex gap-1 flex-wrap",children:t.map((s,t)=>(0,r.jsxs)(d.default,{onClick:()=>s.onClick(e),className:`btn-sm whitespace-nowrap ${"danger"===s.variant?"btn-danger":"secondary"===s.variant?"btn-secondary":"btn-primary"}`,disabled:s.disabled?.(e),title:s.label,children:[s.icon&&r.jsx("span",{className:"mr-1",children:s.icon}),r.jsx("span",{className:"hidden sm:inline",children:s.label}),r.jsx("span",{className:"sm:hidden",children:s.icon})]},t))})})]},a))})]})}),m&&(0,r.jsxs)("div",{className:"flex-none px-4 py-3 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between bg-neutral-50 dark:bg-neutral-800",children:[(0,r.jsxs)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Page ",m.currentPage," of ",m.totalPages]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(d.default,{onClick:()=>m.onPageChange(m.currentPage-1),disabled:m.currentPage<=1,className:"btn-sm btn-secondary",children:[r.jsx(l.Z,{size:16}),r.jsx("span",{className:"hidden sm:inline ml-1",children:"Previous"})]}),(0,r.jsxs)(d.default,{onClick:()=>m.onPageChange(m.currentPage+1),disabled:m.currentPage>=m.totalPages,className:"btn-sm btn-secondary",children:[r.jsx("span",{className:"hidden sm:inline mr-1",children:"Next"}),r.jsx(i,{size:16})]})]})]})]})}},9561:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},8307:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},596:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=t(8570);let a=(0,r.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/layout.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/layout.tsx#default`)},377:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=t(8570);let a=(0,r.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/logs/page.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/logs/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[226,328,657,480],()=>t(3099));module.exports=r})();