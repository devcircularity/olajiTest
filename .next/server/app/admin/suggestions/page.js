(()=>{var e={};e.id=840,e.ids=[840],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},6122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(7173),s(596),s(7449),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["admin",{children:["suggestions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7173)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/suggestions/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,596)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7449)),"/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/suggestions/page.tsx"],m="/admin/suggestions/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/suggestions/page",pathname:"/admin/suggestions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1904:(e,t,s)=>{Promise.resolve().then(s.bind(s,6167))},6167:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(326),r=s(7577),n=s(3136),i=s(2374);class l{async getSuggestions(e){let t=new URLSearchParams;return e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.status&&t.append("status",e.status),e?.suggestion_type&&t.append("suggestion_type",e.suggestion_type),e?.priority&&t.append("priority",e.priority),e?.created_by&&t.append("created_by",e.created_by),e?.school_id&&t.append("school_id",e.school_id),e?.pending_only&&t.append("pending_only","true"),(await i.x.get(`/api/admin/suggestions?${t.toString()}`)).data}async getSuggestionStats(){return(await i.x.get("/api/admin/suggestions/stats")).data}async getEnhancedSuggestionStats(){return(await i.x.get("/api/admin/suggestions/stats-enhanced")).data}async getSuggestion(e){return(await i.x.get(`/api/admin/suggestions/${e}`)).data}async reviewSuggestion(e,t){return(await i.x.post(`/api/admin/suggestions/${e}/review`,t)).data}async reviewSuggestionEnhanced(e,t){return(await i.x.post(`/api/admin/suggestions/${e}/review-enhanced`,t)).data}async implementSuggestion(e){return(await i.x.post(`/api/admin/suggestions/${e}/implement`)).data}async markSuggestionAddressed(e,t){return(await i.x.post(`/api/admin/suggestions/${e}/mark-addressed`,{completion_notes:t})).data}async createActionItem(e,t){return(await i.x.post(`/api/admin/suggestions/${e}/action-items`,t)).data}async getSuggestionActionItems(e){return(await i.x.get(`/api/admin/suggestions/${e}/action-items`)).data}async updateActionItemStatus(e,t,s){return(await i.x.patch(`/api/admin/suggestions/action-items/${e}`,{status:t,completion_notes:s})).data}async completeActionItem(e,t){return(await i.x.post(`/api/admin/suggestions/action-items/${e}/complete`,{completion_notes:t})).data}async getAllActionItems(e){let t=new URLSearchParams;return e?.status&&t.append("status",e.status),e?.priority&&t.append("priority",e.priority),e?.implementation_type&&t.append("implementation_type",e.implementation_type),e?.assigned_to&&t.append("assigned_to",e.assigned_to),e?.due_date_before&&t.append("due_date_before",e.due_date_before),e?.due_date_after&&t.append("due_date_after",e.due_date_after),e?.limit&&t.append("limit",e.limit.toString()),e?.page&&t.append("page",e.page.toString()),(await i.x.get(`/api/admin/suggestions/action-items?${t.toString()}`)).data}async getTesterQueue(e){let t=new URLSearchParams;return e?.priority&&t.append("priority",e.priority.toString()),e?.issue_type&&t.append("issue_type",e.issue_type),e?.limit&&t.append("limit",e.limit.toString()),e?.days_back&&t.append("days_back",e.days_back.toString()),e?.school_id&&t.append("school_id",e.school_id),(await i.x.get(`/api/tester/queue?${t.toString()}`)).data}async submitTesterSuggestion(e){return(await i.x.post("/api/tester/suggestions",e)).data}async getMyTesterSuggestions(e){let t=new URLSearchParams;return e?.limit&&t.append("limit",e.limit.toString()),e?.status&&t.append("status",e.status),e?.suggestion_type&&t.append("suggestion_type",e.suggestion_type),(await i.x.get(`/api/tester/suggestions?${t.toString()}`)).data}async getTesterStats(e){let t=new URLSearchParams;return e?.days_back&&t.append("days_back",e.days_back.toString()),e?.school_id&&t.append("school_id",e.school_id),(await i.x.get(`/api/tester/stats?${t.toString()}`)).data}async getTesterFilters(){return(await i.x.get("/api/tester/filters")).data}}let d=new l;var c=s(2607),o=s(8998),m=s(361),x=s(4019),p=s(2881);let u=(0,p.Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var g=s(2714),h=s(3855);let b=(0,p.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var j=s(1291);let y=(0,p.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var v=s(3679);function f({suggestion:e,onClose:t,onReview:s,onCreateActionItem:n,onMarkAddressed:i}){let[l,d]=(0,r.useState)("details"),[c,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(e.admin_analysis||""),[N,k]=(0,r.useState)(e.implementation_notes||""),[w,_]=(0,r.useState)(e.action_items||[]),[S,A]=(0,r.useState)({title:"",description:"",priority:"medium",implementation_type:"other",due_date:""}),[P,C]=(0,r.useState)(!1),[Z,z]=(0,r.useState)(""),$=async a=>{try{await s(e.id,{status:a,admin_note:`Status: ${a}`,admin_analysis:g,implementation_notes:N,create_action_items:w.length>0,action_items:w.filter(e=>!e.id)}),t()}catch(e){console.error("Failed to review suggestion:",e)}},q=async()=>{if(S.title.trim())try{await n(e.id,{...S,suggestion_id:e.id,due_date:S.due_date?new Date(S.due_date).toISOString():void 0}),A({title:"",description:"",priority:"medium",implementation_type:"other",due_date:""}),C(!1),t()}catch(e){console.error("Failed to create action item:",e)}},M=async()=>{if(Z.trim())try{await i(e.id,Z),t()}catch(e){console.error("Failed to mark as addressed:",e)}},I=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=e=>{switch(e){case"pattern":return"bg-blue-100 text-blue-800";case"template":return"bg-green-100 text-green-800";case"code_fix":return"bg-red-100 text-red-800";case"documentation":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),a.jsx("div",{className:"relative bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 sm:mb-6 gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold break-words",children:e.title}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-neutral-600 mt-1",children:["Submitted by ",e.created_by_name," on ",new Date(e.created_at).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I(e.priority)}`,children:e.priority}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.suggestion_type.replace("_"," ")})]})]}),a.jsx(v.Z,{onClick:t,className:"btn-secondary text-neutral-500 flex-shrink-0",children:a.jsx(x.Z,{size:16})})]}),a.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-700 mb-4 sm:mb-6",children:a.jsx("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto",children:["details","analysis","actions"].map(e=>a.jsx("button",{onClick:()=>d(e),className:`py-2 px-1 border-b-2 font-medium text-xs sm:text-sm capitalize whitespace-nowrap ${l===e?"border-blue-500 text-blue-600":"border-transparent text-neutral-500 hover:text-neutral-700"}`,children:e},e))})}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:["details"===l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Description"}),a.jsx("div",{className:"p-3 sm:p-4 bg-neutral-50 dark:bg-neutral-700 rounded-lg text-sm",children:e.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Handler"}),a.jsx("code",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs sm:text-sm block break-all",children:e.handler})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Intent"}),a.jsx("code",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs sm:text-sm block break-all",children:e.intent})]})]}),e.pattern&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Proposed Pattern"}),a.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200",children:a.jsx("code",{className:"text-xs sm:text-sm break-all",children:e.pattern})}),a.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Note: This is a suggested pattern that may need refinement"})]}),e.template_text&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Proposed Template"}),a.jsx("div",{className:"p-3 sm:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200",children:a.jsx("div",{className:"text-xs sm:text-sm whitespace-pre-wrap",children:e.template_text})}),a.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Note: This is a suggested template that may need refinement"})]}),e.tester_note&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Tester's Note"}),a.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200",children:a.jsx("div",{className:"text-xs sm:text-sm",children:e.tester_note})})]}),e.original_message&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Original User Message"}),a.jsx("div",{className:"p-3 sm:p-4 bg-neutral-50 dark:bg-neutral-700 rounded-lg",children:(0,a.jsxs)("div",{className:"text-xs sm:text-sm",children:['"',e.original_message,'"']})})]}),e.assistant_response&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Current AI Response"}),a.jsx("div",{className:"p-3 sm:p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200",children:a.jsx("div",{className:"text-xs sm:text-sm whitespace-pre-wrap",children:e.assistant_response})})]})]}),"analysis"===l&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 rounded-lg p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx(u,{className:"text-yellow-600 mt-0.5 flex-shrink-0",size:16}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 text-sm sm:text-base",children:"Admin Analysis Required"}),a.jsx("p",{className:"text-xs sm:text-sm text-yellow-700 dark:text-yellow-300",children:"Please analyze this suggestion and determine the appropriate action items needed for implementation."})]})]})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Admin Analysis"}),a.jsx("textarea",{value:g,onChange:e=>f(e.target.value),placeholder:"Analyze what this suggestion is asking for and what needs to be done to address it...",className:"w-full p-3 sm:p-4 border border-neutral-200 rounded-lg min-h-[120px] text-xs sm:text-sm",disabled:!c&&"pending"!==e.status})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Implementation Notes"}),a.jsx("textarea",{value:N,onChange:e=>k(e.target.value),placeholder:"Specific notes on how to implement this suggestion (e.g., 'Create a pattern for class count queries', 'Update error handling template')...",className:"w-full p-3 sm:p-4 border border-neutral-200 rounded-lg min-h-[100px] text-xs sm:text-sm",disabled:!c&&"pending"!==e.status})]}),e.tester_note&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Tester Note"}),a.jsx("div",{className:"p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsx("div",{className:"text-xs sm:text-sm",children:e.tester_note})})]})]}),"actions"===l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[a.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Action Items"}),"approved"===e.status&&(0,a.jsxs)(v.Z,{onClick:()=>C(!0),className:"btn-secondary flex items-center gap-2 text-sm",children:[a.jsx(h.Z,{size:14}),"Add Action Item"]})]}),w.length>0?a.jsx("div",{className:"space-y-3",children:w.map(e=>(0,a.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-2 gap-2",children:[a.jsx("h4",{className:"font-medium text-sm sm:text-base",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(e.priority)}`,children:e.priority}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D(e.implementation_type)}`,children:e.implementation_type.replace("_"," ")})]})]}),a.jsx("p",{className:"text-xs sm:text-sm text-neutral-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs text-neutral-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(o.Z,{size:12}),"Created ",new Date(e.created_at).toLocaleDateString()]}),e.due_date&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx(b,{size:12}),"Due ",new Date(e.due_date).toLocaleDateString()]}),a.jsx("span",{className:`px-2 py-1 rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:e.status.replace("_"," ")})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-6 sm:py-8 text-neutral-500",children:[a.jsx(j.Z,{size:24,className:"mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No action items created yet"}),"approved"===e.status&&a.jsx("p",{className:"text-xs mt-1",children:"Create action items to track implementation progress"})]}),P&&(0,a.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-3 sm:p-4 bg-neutral-50",children:[a.jsx("h4",{className:"font-medium mb-3 sm:mb-4 text-sm sm:text-base",children:"Create Action Item"}),(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Title"}),a.jsx("input",{type:"text",value:S.title,onChange:e=>A({...S,title:e.target.value}),placeholder:"e.g., Create pattern for class count queries",className:"w-full p-2 border border-neutral-200 rounded text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Description"}),a.jsx("textarea",{value:S.description,onChange:e=>A({...S,description:e.target.value}),placeholder:"Detailed description of what needs to be done...",className:"w-full p-2 border border-neutral-200 rounded text-sm",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Priority"}),(0,a.jsxs)("select",{value:S.priority,onChange:e=>A({...S,priority:e.target.value}),className:"w-full p-2 border border-neutral-200 rounded text-sm",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"critical",children:"Critical"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Type"}),(0,a.jsxs)("select",{value:S.implementation_type,onChange:e=>A({...S,implementation_type:e.target.value}),className:"w-full p-2 border border-neutral-200 rounded text-sm",children:[a.jsx("option",{value:"pattern",children:"Create Pattern"}),a.jsx("option",{value:"template",children:"Create Template"}),a.jsx("option",{value:"code_fix",children:"Code Fix"}),a.jsx("option",{value:"documentation",children:"Documentation"}),a.jsx("option",{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Due Date (Optional)"}),a.jsx("input",{type:"date",value:S.due_date,onChange:e=>A({...S,due_date:e.target.value}),className:"w-full p-2 border border-neutral-200 rounded text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx(v.Z,{onClick:q,className:"flex-1 text-sm",children:"Create Action Item"}),a.jsx(v.Z,{onClick:()=>C(!1),className:"btn-secondary flex-1 text-sm",children:"Cancel"})]})]})]}),"approved"===e.status&&w.some(e=>"completed"===e.status)&&(0,a.jsxs)("div",{className:"border-t pt-4",children:[a.jsx("h4",{className:"font-medium mb-3 text-sm sm:text-base",children:"Mark Suggestion as Addressed"}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("textarea",{value:Z,onChange:e=>z(e.target.value),placeholder:"Describe how this suggestion was addressed (e.g., 'Created pattern for class count queries in candidate configuration')...",className:"w-full p-3 border border-neutral-200 rounded-lg text-sm",rows:3}),(0,a.jsxs)(v.Z,{onClick:M,disabled:!Z.trim(),className:"flex items-center gap-2 text-sm",children:[a.jsx(m.Z,{size:16}),"Mark as Addressed"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 pt-4 sm:pt-6 border-t",children:["pending"===e.status&&a.jsx(a.Fragment,{children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Z,{onClick:()=>$("approved"),className:"flex items-center gap-2 text-sm",children:[a.jsx(y,{size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Approve for Action Items"}),a.jsx("span",{className:"sm:hidden",children:"Approve"})]}),(0,a.jsxs)(v.Z,{onClick:()=>$("needs_analysis"),className:"btn-secondary flex items-center gap-2 text-sm",children:[a.jsx(j.Z,{size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Needs More Analysis"}),a.jsx("span",{className:"sm:hidden",children:"Needs Analysis"})]}),(0,a.jsxs)(v.Z,{onClick:()=>$("rejected"),className:"btn-danger flex items-center gap-2 text-sm",children:[a.jsx(x.Z,{size:16}),"Reject"]})]}):a.jsx(v.Z,{onClick:()=>p(!0),className:"flex-1 text-sm",children:"Start Review"})}),"approved"===e.status&&(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-green-600 flex items-center gap-2",children:[a.jsx(m.Z,{size:16,className:"flex-shrink-0"}),"Approved - Create action items to track implementation"]}),"implemented"===e.status&&(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-purple-600 flex items-center gap-2",children:[a.jsx(m.Z,{size:16,className:"flex-shrink-0"}),"Suggestion has been addressed"]})]})]})})]})}function N(){let{user:e}=(0,n.a)(),[t,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[p,b]=(0,r.useState)(!0),[j,y]=(0,r.useState)("pending"),[v,N]=(0,r.useState)(null),[k,w]=(0,r.useState)({currentPage:1,totalPages:1,total:0,hasNext:!1}),_=async(e=1)=>{try{b(!0);let t=await d.getSuggestions({page:e,limit:20,status:"all"===j?void 0:j,pending_only:"pending"===j});s(t.suggestions),w({currentPage:t.page,totalPages:Math.ceil(t.total/20),total:t.total,hasNext:t.has_next})}catch(e){console.error("Failed to load suggestions:",e)}finally{b(!1)}},S=async()=>{try{let e=await d.getSuggestionStats();l(e)}catch(e){console.error("Failed to load stats:",e)}},A=async(e,t)=>{try{await d.reviewSuggestionEnhanced(e,t),_(k.currentPage),S()}catch(e){throw console.error("Failed to review suggestion:",e),e}},P=async(e,t)=>{try{await d.createActionItem(e,t),_(k.currentPage),S()}catch(e){throw console.error("Failed to create action item:",e),e}},C=async(e,t)=>{try{await d.markSuggestionAddressed(e,t),_(k.currentPage),S()}catch(e){throw console.error("Failed to mark as addressed:",e),e}},Z=[{key:"created_at",label:"Submitted",render:e=>a.jsx("span",{className:"text-xs sm:text-sm",children:new Date(e).toLocaleDateString()}),width:"100px"},{key:"created_by_name",label:"Submitted By",render:e=>a.jsx("span",{className:"text-xs sm:text-sm truncate",children:e}),width:"150px"},{key:"suggestion_type",label:"Type",render:e=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"regex_pattern"===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200":"prompt_template"===e?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"intent_mapping"===e?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200":"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200"}`,children:e.replace("_"," ")}),width:"140px"},{key:"title",label:"Title",render:(e,t)=>(0,a.jsxs)("div",{className:"max-w-xs",children:[a.jsx("div",{className:"truncate font-medium text-xs sm:text-sm",title:e,children:e}),t.action_items&&t.action_items.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(o.Z,{size:12,className:"text-blue-500"}),(0,a.jsxs)("span",{className:"text-xs text-blue-600",children:[t.action_items.length," action item",t.action_items.length>1?"s":""]})]})]})},{key:"priority",label:"Priority",render:e=>a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${"critical"===e?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":"high"===e?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200":"medium"===e?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}`,children:e}),width:"100px"},{key:"status",label:"Status",render:(e,t)=>{let s=null,r="";switch(e){case"approved":s=a.jsx(m.Z,{size:12}),r="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";break;case"rejected":s=a.jsx(x.Z,{size:12}),r="bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";break;case"implemented":s=a.jsx(m.Z,{size:12}),r="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";break;case"needs_analysis":s=a.jsx(u,{size:12}),r="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";break;default:s=a.jsx(o.Z,{size:12}),r="bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}return(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${r}`,children:[s,e.replace("_"," ")]})},width:"120px"}],z=[{label:"View Details",icon:a.jsx(g.Z,{size:14}),onClick:e=>N(e),variant:"secondary"},{label:"Create Action Item",icon:a.jsx(h.Z,{size:14}),onClick:e=>{N(e)},variant:"primary",disabled:e=>"approved"!==e.status}];return e?.permissions?.is_tester||e?.permissions?.is_admin||e?.permissions?.is_super_admin?(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-4",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Tester Suggestions"}),a.jsx("p",{className:"text-sm sm:text-base text-neutral-600",children:"Review suggestions and create action items for implementation"})]})}),a.jsx("div",{className:"card p-3 sm:p-4 mb-4 sm:mb-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("div",{className:"flex items-start gap-2 sm:gap-3",children:[a.jsx(u,{className:"text-blue-600 mt-1 flex-shrink-0",size:16}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2 text-sm sm:text-base",children:"Enhanced Suggestion Workflow"}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,a.jsxs)("p",{children:["• ",a.jsx("strong",{children:"Review:"})," Analyze suggestions and determine what needs to be done"]}),(0,a.jsxs)("p",{children:["• ",a.jsx("strong",{children:"Create Action Items:"})," Break down implementation into specific tasks"]}),(0,a.jsxs)("p",{children:["• ",a.jsx("strong",{children:"Track Progress:"})," Monitor completion of action items"]}),(0,a.jsxs)("p",{children:["• ",a.jsx("strong",{children:"Manual Implementation:"})," Admin creates patterns/templates as needed"]})]})]})]})}),i&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Total"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:i.total_suggestions})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Pending"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:i.pending})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Approved"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:i.approved})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600 truncate",children:"Need Analysis"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-yellow-600",children:i.needs_analysis||0})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Rejected"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-red-600",children:i.rejected})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Addressed"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:i.implemented})]})]}),a.jsx("div",{className:"card p-3 sm:p-4 mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-center",children:[a.jsx("label",{className:"text-xs sm:text-sm font-medium",children:"Filter by Status:"}),(0,a.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"input w-full sm:w-48 text-sm",children:[a.jsx("option",{value:"pending",children:"Pending Review"}),a.jsx("option",{value:"needs_analysis",children:"Needs Analysis"}),a.jsx("option",{value:"approved",children:"Approved (Ready for Action Items)"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"implemented",children:"Addressed"}),a.jsx("option",{value:"all",children:"All"})]})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx(c.Z,{data:t,columns:Z,actions:z,loading:p,searchable:!0,searchPlaceholder:"Search suggestions...",pagination:{currentPage:k.currentPage,totalPages:k.totalPages,onPageChange:_},emptyMessage:"No suggestions found",className:"text-xs sm:text-sm"})}),v&&a.jsx(f,{suggestion:v,onClose:()=>N(null),onReview:A,onCreateActionItem:P,onMarkAddressed:C})]}):a.jsx("div",{className:"p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-neutral-600",children:"You don't have permission to access the tester queue."})]})})}},3679:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(326),r=s(1135);function n({className:e,children:t,...s}){return a.jsx("button",{className:(0,r.Z)("btn-primary",e),...s,children:t})}},2607:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var a=s(326),r=s(7577),n=s(8307),i=s(1890);let l=(0,s(2881).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=s(3679);function c({data:e,columns:t,actions:s,loading:c=!1,searchable:o=!1,searchPlaceholder:m="Search...",pagination:x,emptyMessage:p="No data available",className:u=""}){let[g,h]=(0,r.useState)(""),[b,j]=(0,r.useState)(null),y=o?e.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(g.toLowerCase()))):e,v=b?[...y].sort((e,t)=>{let s=e[b.key],a=t[b.key];return s<a?"asc"===b.direction?-1:1:s>a?"asc"===b.direction?1:-1:0}):y,f=e=>{j(t=>t?.key===e?{key:e,direction:"asc"===t.direction?"desc":"asc"}:{key:e,direction:"asc"})},N=(e,t)=>{let s=e[t.key];return t.render?t.render(s,e):s};return c?a.jsx("div",{className:`card ${u}`,children:(0,a.jsxs)("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[--color-brand]"}),a.jsx("p",{className:"mt-2 text-neutral-600",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:`card ${u}`,children:[o&&a.jsx("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:16}),a.jsx("input",{type:"text",placeholder:m,value:g,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg  bg-white dark:bg-neutral-800 focus:ring-2 focus:ring-[--color-brand] focus:border-transparent"})]})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-neutral-50 dark:bg-neutral-800",children:(0,a.jsxs)("tr",{children:[t.map((e,t)=>a.jsx("th",{className:`px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider
                    ${e.sortable?"cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700":""}
                    ${e.width?`w-${e.width}`:""}`,onClick:e.sortable?()=>f(String(e.key)):void 0,children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[e.label,e.sortable&&b?.key===e.key&&a.jsx("span",{className:"text-[--color-brand]",children:"asc"===b.direction?"↑":"↓"})]})},t)),s&&s.length>0&&a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:0===v.length?a.jsx("tr",{children:a.jsx("td",{colSpan:t.length+(s?1:0),className:"px-4 py-8 text-center text-neutral-500 dark:text-neutral-400",children:p})}):v.map((e,r)=>(0,a.jsxs)("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-800/50",children:[t.map((t,s)=>a.jsx("td",{className:"px-4 py-3 text-sm text-neutral-900 dark:text-neutral-100",children:N(e,t)},s)),s&&s.length>0&&a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("div",{className:"flex gap-2",children:s.map((t,s)=>(0,a.jsxs)(d.Z,{onClick:()=>t.onClick(e),className:`btn-sm ${"danger"===t.variant?"btn-danger":"secondary"===t.variant?"btn-secondary":"btn-primary"}`,disabled:t.disabled?.(e),children:[t.icon&&a.jsx("span",{className:"mr-1",children:t.icon}),t.label]},s))})})]},r))})]})}),x&&(0,a.jsxs)("div",{className:"px-4 py-3 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Page ",x.currentPage," of ",x.totalPages]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.Z,{onClick:()=>x.onPageChange(x.currentPage-1),disabled:x.currentPage<=1,className:"btn-sm btn-secondary",children:[a.jsx(i.Z,{size:16}),"Previous"]}),(0,a.jsxs)(d.Z,{onClick:()=>x.onPageChange(x.currentPage+1),disabled:x.currentPage>=x.totalPages,className:"btn-sm btn-secondary",children:["Next",a.jsx(l,{size:16})]})]})]})]})}},361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7173:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=s(8570);let r=(0,a.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/suggestions/page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/suggestions/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[226,784,392,832],()=>s(6122));module.exports=a})();