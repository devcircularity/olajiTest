exports.id=832,exports.ids=[832],exports.modules={7667:(e,l,s)=>{Promise.resolve().then(s.bind(s,4528))},4528:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>b});var t=s(326),a=s(7577),r=s(3136),n=s(5047),i=s(2281),d=s(434);let c=(0,s(2881).Z)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);function o({open:e,onClose:l,onLogout:s,userLabel:a,email:r,schoolId:n}){if(!e)return null;let i=(a||r||"U").slice(0,1).toUpperCase();return(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-[90] bg-black/40 backdrop-blur-[2px]",onClick:l}),(0,t.jsxs)("div",{className:"fixed right-4 top-16 z-[100] w-[360px] sm:w-[380px] rounded-[1.25rem] card border border-neutral-200/60 overflow-hidden shadow-[var(--shadow-soft)]",onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true",children:[(0,t.jsxs)("div",{className:"relative px-4 py-3 bg-neutral-900/5 dark:bg-white/5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-[--color-brand] text-white font-semibold",children:i}),(0,t.jsxs)("div",{className:"min-w-0",children:[r&&t.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:r}),t.jsx("div",{className:"text-sm font-medium truncate",children:a||"User"})]})]}),t.jsx("button",{onClick:l,className:"absolute right-3 top-3 text-neutral-500 hover:text-neutral-800 dark:hover:text-neutral-200","aria-label":"Close",children:"✕"})]}),(0,t.jsxs)("div",{className:"px-5 pt-4 pb-3",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold",children:["Hi",a?`, ${a.split(" ")[0]}!`:"!"]}),t.jsx("button",{className:"mt-3 btn-primary w-full rounded-xl py-2.5",onClick:()=>alert("Manage account (stub)"),children:"Manage your Account"})]}),t.jsx("div",{className:"mx-4 mb-3 rounded-2xl bg-neutral-100 dark:bg-neutral-800 p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-xl leading-none",children:"\uD83C\uDFE0"}),(0,t.jsxs)("div",{className:"text-sm",children:[t.jsx("div",{className:"font-medium",children:"Set your school & year"}),t.jsx("div",{className:"text-neutral-600 dark:text-neutral-400",children:"Pick active school and academic year for better results."}),(0,t.jsxs)("div",{className:"mt-2 flex gap-3",children:[t.jsx("button",{className:"btn rounded-lg px-3 py-1.5 hover:bg-neutral-200 dark:hover:bg-neutral-700",children:"Dismiss"}),t.jsx("button",{className:"link-subtle",children:"Open settings"})]})]})]})}),t.jsx("div",{className:"px-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{className:"btn rounded-xl px-3 py-2 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700",onClick:()=>alert("Add account (stub)"),children:"+ Add account"}),t.jsx("button",{className:"btn rounded-xl px-3 py-2 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700",onClick:()=>{l(),s()},children:"Sign out"})]})}),t.jsx("div",{className:"mt-3 px-2 pb-2",children:(0,t.jsxs)("ul",{className:"grid gap-2",children:[t.jsx("li",{children:(0,t.jsxs)("button",{className:"w-full text-left rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:["\uD83D\uDD0E ",t.jsx("span",{className:"ml-2",children:"Search history"}),t.jsx("span",{className:"float-right text-xs text-neutral-500",children:"Not saving"})]})}),t.jsx("li",{children:(0,t.jsxs)("button",{className:"w-full text-left rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:["\uD83D\uDCC1 ",t.jsx("span",{className:"ml-2",children:"Saves & Collections"})]})}),t.jsx("li",{children:(0,t.jsxs)("button",{className:"w-full text-left rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:["✨ ",t.jsx("span",{className:"ml-2",children:"Search personalization"})]})}),(0,t.jsxs)("li",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("button",{className:"rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-left",children:["\uD83D\uDEE1️ ",t.jsx("span",{className:"ml-2",children:"SafeSearch"}),t.jsx("div",{className:"text-xs text-neutral-500 ml-7 -mt-1",children:"Blurring on"})]}),(0,t.jsxs)("button",{className:"rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-left",children:["\uD83C\uDF10 ",t.jsx("span",{className:"ml-2",children:"Language"}),t.jsx("div",{className:"text-xs text-neutral-500 ml-7 -mt-1",children:"English"})]})]}),(0,t.jsxs)("li",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("button",{className:"rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-left",children:["⚙️ ",t.jsx("span",{className:"ml-2",children:"More settings"})]}),(0,t.jsxs)("button",{className:"rounded-xl px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 text-left",children:["❔ ",t.jsx("span",{className:"ml-2",children:"Help"})]})]})]})}),(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between text-xs text-neutral-600 dark:text-neutral-400 border-t border-neutral-200/70 dark:border-white/10",children:[t.jsx("div",{children:"Privacy Policy"}),t.jsx("div",{children:"Terms of Service"})]})]})]})}function u(){let{token:e,active_school_id:l,logout:s}=(0,r.a)(),[n,i]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[m,b]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),[v,f]=(0,a.useState)(""),j=(0,a.useRef)(null),N=(0,a.useMemo)(()=>(function(e){if(!e)return null;try{let l=e.split(".")[1]?.replace(/-/g,"+").replace(/_/g,"/"),s=atob(l);return JSON.parse(s)}catch{return null}})(e||void 0),[e]),k=N?.full_name,w=N?.email,y=k||w||"Guest",S=function(e,l){let s=(e||"").trim();return s?s.split(/\s+/).slice(0,2).map(e=>e[0]?.toUpperCase()||"").join("")||"U":l&&l[0]?.toUpperCase()||"U"}(k,w),C=l??N?.active_school_id;return(0,t.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[m&&t.jsx("button",{onClick:()=>{h.send({type:"toggle"})},className:"p-2 -ml-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors","aria-label":"Toggle sidebar",children:t.jsx(c,{size:20,className:"text-neutral-600 dark:text-neutral-400"})}),p&&(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[t.jsx("h1",{className:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:p}),v&&t.jsx("p",{className:"text-xs sm:text-sm text-neutral-600 dark:text-neutral-400 truncate",children:v})]})]}),t.jsx("div",{className:"flex items-center flex-shrink-0",children:e?(0,t.jsxs)("div",{className:"relative",ref:j,children:[t.jsx("button",{onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onClick:()=>i(!0),className:"inline-flex h-10 w-10 items-center justify-center  rounded-full bg-[--color-brand] text-white font-semibold text-sm shadow-lg hover:shadow-xl ring-2 ring-[--color-brand]/30 dark:ring-[--color-brand]/40 border-2 border-[--color-brand-light]/50 hover:scale-105 active:scale-95 transition-all duration-200 ease-out","aria-label":"User menu",title:y,children:S}),u&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 card px-3 py-2 text-xs min-w-[200px] z-50",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[t.jsx("div",{className:"font-medium truncate",children:y}),w&&t.jsx("div",{className:"text-neutral-600 dark:text-neutral-400 truncate",children:w})]}),t.jsx(o,{open:n,onClose:()=>i(!1),onLogout:s,userLabel:y,email:w||void 0,schoolId:C})]}):(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[t.jsx(d.default,{className:"link-subtle",href:"/login",children:"Login"}),t.jsx(d.default,{className:"link-subtle",href:"/signup",children:"Sign up"})]})})]})}let x=new Set,h={send(e){x.forEach(l=>l(e))},on:e=>(x.add(e),()=>{x.delete(e)})};function m({children:e}){let[l,s]=(0,a.useState)(!0),[r,n]=(0,a.useState)(!1),d=e=>{console.log("Toggle sidebar called:",{newState:e,currentCollapsed:l,isMobile:r}),s(l=>{let s=void 0!==e?e:!l;return console.log("Sidebar state changing from",l,"to",s),r||localStorage.setItem("sidebar_collapsed",s?"1":"0"),s})};return t.jsx("div",{className:"h-svh w-full overflow-hidden",children:(0,t.jsxs)("div",{className:"flex-1 overflow-hidden relative h-full",children:[r&&!l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>d(!0)}),(0,t.jsxs)("div",{className:"relative flex overflow-hidden h-full",children:[t.jsx("div",{className:`
            transition-all duration-300 ease-in-out
            ${r?`fixed left-0 top-0 h-full w-80 z-40 ${l?"-translate-x-full":"translate-x-0"}`:`relative z-10 ${l?"w-16":"w-auto"}`}
          `,children:t.jsx(i.Z,{collapsed:l&&!r,onCollapse:d,isMobile:r})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col h-full overflow-hidden",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(u,{})}),t.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:e})]})]})]})})}function b({children:e}){let{user:l,isLoading:s,isAuthenticated:a}=(0,r.a)();return((0,n.useRouter)(),s)?t.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading..."})]})}):a&&l&&(l.roles?.includes("ADMIN")||l.roles?.includes("SUPER_ADMIN")||l.permissions?.is_admin||l.permissions?.is_super_admin)?t.jsx(m,{children:e}):null}},596:(e,l,s)=>{"use strict";s.r(l),s.d(l,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});var t=s(8570);let a=(0,t.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/layout.tsx`),{__esModule:r,$$typeof:n}=a;a.default;let i=(0,t.createProxy)(String.raw`/Users/ericmwirichia/Documents/SchoolAI/admin-frontend/app/admin/layout.tsx#default`)}};