(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{8041:function(e,t,a){Promise.resolve().then(a.bind(a,3591))},3591:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7437),s=a(2265),n=a(857),l=a(6957),i=a(7019),c=a(5733),o=a(6127);function d(){let{token:e,isAuthenticated:t,logout:a}=(0,n.a)(),[d,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[g,f]=(0,s.useState)(""),[v,y]=(0,s.useState)(!1),[b,k]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[E,P]=(0,s.useState)(!1),[S,Z]=(0,s.useState)(""),[_,A]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(e){let t=function(e){if(!e)return null;try{var t;let a=null===(t=e.split(".")[1])||void 0===t?void 0:t.replace(/-/g,"+").replace(/_/g,"/"),r=atob(a);return JSON.parse(r)}catch(e){return null}}(e);t&&u(t.email||"")}},[e]);let M=async()=>{C(!0);try{await new Promise(e=>setTimeout(e,1e3)),P(!0),setTimeout(()=>P(!1),3e3)}catch(e){console.error("Failed to change email:",e)}finally{C(!1)}},L=async()=>{if(m!==g){alert("New passwords do not match");return}C(!0);try{await new Promise(e=>setTimeout(e,1e3)),x(""),p(""),f(""),P(!0),setTimeout(()=>P(!1),3e3)}catch(e){console.error("Failed to change password:",e)}finally{C(!1)}},z=async()=>{if("DELETE"!==S){alert("Please type DELETE to confirm account deletion");return}if(confirm("Are you absolutely sure you want to delete your account? This action cannot be undone.")){C(!0);try{await new Promise(e=>setTimeout(e,1e3)),a()}catch(e){console.error("Failed to delete account:",e)}finally{C(!1)}}};return t?(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:"Account"}),(0,r.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Manage your account security and preferences"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Email Address"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Email"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("input",{type:"email",value:d,onChange:e=>u(e.target.value),className:"input flex-1",placeholder:"Enter your email address"}),(0,r.jsx)("button",{onClick:M,disabled:w,className:"btn-primary",children:w?"Updating...":"Update"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4 border-t border-neutral-200 dark:border-neutral-700 pt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Change Password"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Current Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:v?"text":"password",value:h,onChange:e=>x(e.target.value),className:"input pr-10",placeholder:"Enter your current password"}),(0,r.jsx)("button",{type:"button",onClick:()=>y(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:v?(0,r.jsx)(i.Z,{size:16}):(0,r.jsx)(c.Z,{size:16})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:b?"text":"password",value:m,onChange:e=>p(e.target.value),className:"input pr-10",placeholder:"Enter new password"}),(0,r.jsx)("button",{type:"button",onClick:()=>k(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:b?(0,r.jsx)(i.Z,{size:16}):(0,r.jsx)(c.Z,{size:16})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label",children:"Confirm New Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:j?"text":"password",value:g,onChange:e=>f(e.target.value),className:"input pr-10",placeholder:"Confirm new password"}),(0,r.jsx)("button",{type:"button",onClick:()=>N(!j),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:j?(0,r.jsx)(i.Z,{size:16}):(0,r.jsx)(c.Z,{size:16})})]})]})]}),(0,r.jsx)("button",{onClick:L,disabled:w||!h||!m||!g,className:"btn-primary",children:w?"Changing Password...":"Change Password"})]}),(0,r.jsxs)("div",{className:"space-y-4 border-t border-neutral-200 dark:border-neutral-700 pt-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.Z,{size:20,className:"text-red-500"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-red-600 dark:text-red-400",children:"Danger Zone"})]}),(0,r.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-red-800 dark:text-red-200 mb-2",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-red-700 dark:text-red-300 text-sm mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),_?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"label text-red-800 dark:text-red-200",children:["Type ",(0,r.jsx)("strong",{children:"DELETE"})," to confirm"]}),(0,r.jsx)("input",{type:"text",value:S,onChange:e=>Z(e.target.value),className:"input border-red-300 dark:border-red-700",placeholder:"DELETE"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:z,disabled:w||"DELETE"!==S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:w?"Deleting...":"Permanently Delete Account"}),(0,r.jsx)("button",{onClick:()=>{A(!1),Z("")},className:"px-4 py-2 bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors text-sm font-medium",children:"Cancel"})]})]}):(0,r.jsx)("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Delete Account"})]})]}),E&&(0,r.jsx)("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm font-medium",children:(0,r.jsx)("span",{children:"Changes saved successfully!"})})]})}):(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Please log in to access your account settings."})})})}},6957:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7437),s=a(6463),n=a(7138),l=a(8030);let i=(0,l.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),c=[{href:"/settings/profile",label:"Profile",icon:i},{href:"/settings/account",label:"Account",icon:(0,l.Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},{href:"/settings/devices&messaging",label:"Devices & Messaging",icon:(0,l.Z)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},{href:"/settings/notifications",label:"Notifications",icon:(0,l.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}];function o(e){let{children:t,title:a="Settings",subtitle:l="Manage your account and preferences"}=e,i=(0,s.usePathname)();return(0,r.jsx)("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-950",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 dark:text-neutral-100",children:a}),(0,r.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:l})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 h-[calc(100vh-200px)]",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)("nav",{className:"space-y-1 sticky top-8",children:c.map(e=>{let t=e.icon,a=i===e.href;return(0,r.jsxs)(n.default,{href:e.href,className:"\n                      flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors\n                      ".concat(a?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-neutral-100","\n                    "),children:[(0,r.jsx)(t,{size:18,className:"flex-shrink-0"}),(0,r.jsx)("span",{children:e.label})]},e.href)})})}),(0,r.jsx)("div",{className:"lg:col-span-3 h-full overflow-hidden",children:(0,r.jsx)("div",{className:"card h-full overflow-y-auto",children:(0,r.jsx)("div",{className:"p-6",children:t})})})]})]})})}},857:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return i},a:function(){return c}});var r=a(7437),s=a(2265),n=a(6463);let l=(0,s.createContext)({token:null,active_school_id:null,isLoading:!0,login:async()=>{},logout:()=>{},setSchoolId:()=>{},isAuthenticated:!1});function i(e){let{children:t}=e,[a,i]=(0,s.useState)({token:null,active_school_id:null,isLoading:!0}),c=(0,n.useRouter)();(0,s.useEffect)(()=>{i({token:localStorage.getItem("token"),active_school_id:localStorage.getItem("active_school_id"),isLoading:!1})},[]);let o=async e=>{localStorage.setItem("token",e.token),i(t=>({...t,token:e.token,isLoading:!1}))},d={...a,login:o,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),i({token:null,active_school_id:null,isLoading:!1}),c.replace("/login")},setSchoolId:e=>{localStorage.setItem("active_school_id",e),i(t=>({...t,active_school_id:e}))},isAuthenticated:!!a.token&&!a.isLoading};return(0,r.jsx)(l.Provider,{value:d,children:t})}let c=()=>(0,s.useContext)(l)},8030:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(2265);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:h,...x}=e;return(0,r.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:a,strokeWidth:l?24*Number(n)/Number(s):n,className:i("lucide",d),...!u&&!c(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:c,...o}=a;return(0,r.createElement)(d,{ref:n,iconNode:t,className:i("lucide-".concat(s(l(e))),"lucide-".concat(e),c),...o})});return a.displayName=l(e),a}},7019:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8030).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5733:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6127:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8030).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=8041)}),_N_E=e.O()}]);