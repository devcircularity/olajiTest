(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{3040:function(e,t,n){Promise.resolve().then(n.bind(n,1039))},1039:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(7437),s=n(7138),l=n(6463),r=n(2265),o=n(857),i=n(1785),c=n(5520),u=n(5950),d=n(8234),h=n(4308);function m(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)().get("next")||"/",{login:n,setSchoolId:m}=(0,o.a)(),[f,x]=(0,r.useState)(""),[v,p]=(0,r.useState)(""),[g,j]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[y,w]=(0,r.useState)(null),[b,N]=(0,r.useState)(!1);async function S(a){var s,l,r;if(a.preventDefault(),w(null),g!==_){w("Passwords do not match");return}N(!0);try{let a=await i.O.signup({full_name:f,email:v,password:g}),l=null==a?void 0:a.access_token;if(!l)throw console.error("Signup response:",a),Error("No access token returned");await n({token:l});let r=null!==(s=null==a?void 0:a.school_id)&&void 0!==s?s:null;r?(m(r),e.replace(t)):e.replace("/onboarding/school?next=".concat(encodeURIComponent(t)))}catch(e){console.error("Signup error:",e),w((null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.detail)||(null==e?void 0:e.message)||"Sign up failed")}finally{N(!1)}}let Z=!g||!_||g===_;return(0,a.jsxs)(c.Z,{title:"Create your account",subtitle:"Start organizing your school",children:[(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",noValidate:!0,children:[(0,a.jsx)(u.Z,{id:"full-name",label:"Full name",value:f,onChange:e=>x(e.target.value),placeholder:"Jane Doe",autoComplete:"name",required:!0}),(0,a.jsx)(u.Z,{id:"signup-email",label:"Email",type:"email",value:v,onChange:e=>p(e.target.value),placeholder:"you@example.com",autoComplete:"email",required:!0}),(0,a.jsx)(d.Z,{id:"signup-password",label:"Password",value:g,onChange:e=>j(e.target.value),placeholder:"Password",helperText:"Use at least 6 characters.",autoComplete:"new-password",required:!0}),(0,a.jsx)(d.Z,{id:"confirm-password",label:"Confirm password",value:_,onChange:e=>k(e.target.value),placeholder:"Password",autoComplete:"new-password",required:!0,error:g&&_&&g!==_?"Passwords do not match":null}),(0,a.jsx)(h.Z,{className:"w-full",disabled:b||!Z,children:b?"Creatingâ€¦":"Create account"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mt-4",children:[(0,a.jsxs)("span",{className:"opacity-80",children:["Already have an account? ",(0,a.jsx)(s.default,{className:"link",href:"/login",children:"Sign in"})]}),(0,a.jsx)(s.default,{href:"/forgot-password",className:"link",children:"Forgot password?"})]}),y&&(0,a.jsx)("p",{className:"error-text mt-3",role:"alert","aria-live":"polite",children:y})]})}function f(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(m,{})})}},5520:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(7437),s=n(9581);function l(){return(0,a.jsx)("nav",{className:"w-full",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center h-16",children:[(0,a.jsx)("div",{className:"w-full md:w-auto flex justify-center md:justify-start",children:(0,a.jsx)(s.D2,{})}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-4 ml-auto"})]})})})}function r(e){let{children:t,title:n,subtitle:s}=e;return(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 z-10",children:(0,a.jsx)(l,{})}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center px-6 py-12",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold mb-2",children:n}),s&&(0,a.jsx)("p",{className:"text-lg text-neutral-600 dark:text-neutral-400",children:s})]}),(0,a.jsx)("div",{className:"card p-6",children:t})]})})]})}},4308:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(7437),s=n(4839);function l(e){let{className:t,children:n,...l}=e;return(0,a.jsx)("button",{className:(0,s.Z)("btn-primary",t),...l,children:n})}},9581:function(e,t,n){"use strict";n.d(t,{D2:function(){return d},K7:function(){return h},ZP:function(){return u}});var a=n(7437),s=n(7138),l=n(3027),r=n(4839);let o=(0,l.j)("flex items-center gap-3",{variants:{size:{sm:"",md:"",lg:""}},defaultVariants:{size:"sm"}}),i=(0,l.j)("relative rounded-xl bg-gradient-to-br from-[#1f7daf] to-[#104f73] grid place-items-center text-white font-bold shadow-lg ring-2 ring-[#1f7daf]/20",{variants:{size:{sm:"h-9 w-9 text-lg",md:"h-12 w-12 text-xl",lg:"h-16 w-16 text-2xl"}},defaultVariants:{size:"sm"}}),c=(0,l.j)("font-semibold bg-gradient-to-r from-[#1f7daf] to-[#104f73] bg-clip-text text-transparent",{variants:{size:{sm:"text-xl",md:"text-2xl",lg:"text-3xl"}},defaultVariants:{size:"sm"}});function u(e){let{size:t="sm",href:n="/",className:l,showText:u=!0}=e,d=(0,a.jsxs)("div",{className:(0,r.Z)(o({size:t}),l),children:[(0,a.jsx)("div",{className:i({size:t}),children:(0,a.jsx)("span",{className:"drop-shadow-sm",children:"O"})}),u&&(0,a.jsx)("span",{className:c({size:t}),children:"Olaji"})]});return n?(0,a.jsx)(s.default,{href:n,children:d}):d}function d(e){let{className:t}=e;return(0,a.jsx)(u,{size:"sm",className:t})}function h(e){let{size:t="sm",className:n}=e;return(0,a.jsx)(u,{size:t,showText:!1,href:void 0,className:n})}},8234:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7437),s=n(2265),l=n(7019),r=n(5733),o=n(5950);function i(e){let[t,n]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{...e,type:t?"text":"password"}),(0,a.jsx)("button",{type:"button",onClick:()=>n(e=>!e),"aria-label":t?"Hide password":"Show password",className:"absolute right-3 top-[38px] text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",children:t?(0,a.jsx)(l.Z,{size:18}):(0,a.jsx)(r.Z,{size:18})})]})}},5950:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(7437),s=n(4839);function l(e){let{id:t,label:n,type:l="text",value:r,onChange:o,placeholder:i,required:c,error:u,helperText:d,autoComplete:h}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:t,className:"label",children:n}),(0,a.jsx)("input",{id:t,type:l,value:r,onChange:o,placeholder:i,autoComplete:h,required:c,"aria-invalid":!!u,"aria-describedby":u?"".concat(t,"-error"):d?"".concat(t,"-help"):void 0,className:(0,s.Z)("input",u&&"input-invalid")}),u?(0,a.jsx)("p",{id:"".concat(t,"-error"),role:"alert",className:"error-text mt-1",children:u}):d?(0,a.jsx)("p",{id:"".concat(t,"-help"),className:"helper mt-1",children:d}):null]})}},857:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return o},a:function(){return i}});var a=n(7437),s=n(2265),l=n(6463);let r=(0,s.createContext)({token:null,active_school_id:null,isLoading:!0,login:async()=>{},logout:()=>{},setSchoolId:()=>{},isAuthenticated:!1});function o(e){let{children:t}=e,[n,o]=(0,s.useState)({token:null,active_school_id:null,isLoading:!0}),i=(0,l.useRouter)();(0,s.useEffect)(()=>{o({token:localStorage.getItem("token"),active_school_id:localStorage.getItem("active_school_id"),isLoading:!1})},[]);let c=async e=>{localStorage.setItem("token",e.token),o(t=>({...t,token:e.token,isLoading:!1}))},u={...n,login:c,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),o({token:null,active_school_id:null,isLoading:!1}),i.replace("/login")},setSchoolId:e=>{localStorage.setItem("active_school_id",e),o(t=>({...t,active_school_id:e}))},isAuthenticated:!!n.token&&!n.isLoading};return(0,a.jsx)(r.Provider,{value:u,children:t})}let i=()=>(0,s.useContext)(r)},7019:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8030).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5733:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(8030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},459:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});let a=n(8472).Z.create({baseURL:"http://localhost:8000",timeout:2e4});a.interceptors.request.use(e=>{let t=localStorage.getItem("token"),n=localStorage.getItem("active_school_id");return t&&(e.headers.Authorization="Bearer ".concat(t)),n&&(e.headers["X-School-ID"]=n),e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("Unauthorized request detected"),localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),window.location.href="/login"),Promise.reject(e)})},1785:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var a=n(459);let s={async signup(e){let{data:t}=await a.h.post("/api/auth/register",e);return t.access_token&&localStorage.setItem("token",t.access_token),t.school_id&&localStorage.setItem("active_school_id",String(t.school_id)),{access_token:t.access_token,school_id:t.school_id}},async login(e){let{data:t}=await a.h.post("/api/auth/login",e);return t.access_token&&localStorage.setItem("token",t.access_token),t.school_id&&localStorage.setItem("active_school_id",String(t.school_id)),{access_token:t.access_token,school_id:t.school_id}},logout(){localStorage.removeItem("token"),localStorage.removeItem("active_school_id")}}},3027:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var a=n(4839);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.W,r=(e,t)=>n=>{var a;if((null==t?void 0:t.variants)==null)return l(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:r,defaultVariants:o}=t,i=Object.keys(r).map(e=>{let t=null==n?void 0:n[e],a=null==o?void 0:o[e];if(null===t)return null;let l=s(t)||s(a);return r[e][l]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,a]=t;return void 0===a||(e[n]=a),e},{});return l(e,i,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:n,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...c}[t]):({...o,...c})[t]===n})?[...e,n,a]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}},4839:function(e,t,n){"use strict";function a(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=function e(t){var n,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(a=e(t[n]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{W:function(){return a}}),t.Z=a}},function(e){e.O(0,[236,48,971,23,744],function(){return e(e.s=3040)}),_N_E=e.O()}]);