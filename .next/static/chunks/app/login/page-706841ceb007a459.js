(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{476:function(e,t,n){Promise.resolve().then(n.bind(n,5207))},5207:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(7437),l=n(6463),r=n(857),a=n(1785),o=n(2265),i=n(7138),c=n(5520),u=n(5950),d=n(8234),h=n(4308);function m(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)().get("next")||"/",{login:n,setSchoolId:m}=(0,r.a)(),[f,x]=(0,o.useState)(""),[v,p]=(0,o.useState)(""),[g,j]=(0,o.useState)(null),[_,k]=(0,o.useState)(!1);async function y(s){s.preventDefault(),j(null),k(!0);try{let s=await a.O.login({email:f,password:v}),l=null==s?void 0:s.access_token;if(!l)throw console.error("Login response:",s),Error("No access token in response");await n({token:l});let r=null==s?void 0:s.school_id;r?(m(r.toString()),e.replace(t)):e.replace("/onboarding/school?next=".concat(encodeURIComponent(t)))}catch(e){var l,r;console.error("Login error:",e),j((null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.detail)||(null==e?void 0:e.message)||"Login failed")}finally{k(!1)}}return(0,s.jsxs)(c.Z,{title:"Welcome back",subtitle:"Sign in to manage your school",children:[(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",noValidate:!0,children:[(0,s.jsx)(u.Z,{id:"email",label:"Email",type:"email",value:f,onChange:e=>x(e.target.value),placeholder:"email address",autoComplete:"email",required:!0}),(0,s.jsx)(d.Z,{id:"password",label:"Password",value:v,onChange:e=>p(e.target.value),placeholder:"Password",autoComplete:"current-password",required:!0}),(0,s.jsx)(h.Z,{className:"w-full",disabled:_,children:_?"Signing inâ€¦":"Continue"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm mt-4",children:[(0,s.jsx)(i.default,{href:"/forgot-password",className:"link",children:"Forgot password?"}),(0,s.jsxs)("span",{className:"opacity-80",children:["Don't have an account? ",(0,s.jsx)(i.default,{href:"/signup",className:"link",children:"Create one"})]})]}),g&&(0,s.jsx)("p",{className:"error-text mt-3",role:"alert","aria-live":"polite",children:g})]})}function f(){return(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(m,{})})}},5520:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(7437),l=n(9581);function r(){return(0,s.jsx)("nav",{className:"w-full",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center h-16",children:[(0,s.jsx)("div",{className:"w-full md:w-auto flex justify-center md:justify-start",children:(0,s.jsx)(l.D2,{})}),(0,s.jsx)("div",{className:"hidden md:flex items-center space-x-4 ml-auto"})]})})})}function a(e){let{children:t,title:n,subtitle:l}=e;return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 z-10",children:(0,s.jsx)(r,{})}),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center px-6 py-12",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold mb-2",children:n}),l&&(0,s.jsx)("p",{className:"text-lg text-neutral-600 dark:text-neutral-400",children:l})]}),(0,s.jsx)("div",{className:"card p-6",children:t})]})})]})}},4308:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437),l=n(4839);function r(e){let{className:t,children:n,...r}=e;return(0,s.jsx)("button",{className:(0,l.Z)("btn-primary",t),...r,children:n})}},9581:function(e,t,n){"use strict";n.d(t,{D2:function(){return d},K7:function(){return h},ZP:function(){return u}});var s=n(7437),l=n(7138),r=n(3027),a=n(4839);let o=(0,r.j)("flex items-center gap-3",{variants:{size:{sm:"",md:"",lg:""}},defaultVariants:{size:"sm"}}),i=(0,r.j)("relative rounded-xl bg-gradient-to-br from-[#1f7daf] to-[#104f73] grid place-items-center text-white font-bold shadow-lg ring-2 ring-[#1f7daf]/20",{variants:{size:{sm:"h-9 w-9 text-lg",md:"h-12 w-12 text-xl",lg:"h-16 w-16 text-2xl"}},defaultVariants:{size:"sm"}}),c=(0,r.j)("font-semibold bg-gradient-to-r from-[#1f7daf] to-[#104f73] bg-clip-text text-transparent",{variants:{size:{sm:"text-xl",md:"text-2xl",lg:"text-3xl"}},defaultVariants:{size:"sm"}});function u(e){let{size:t="sm",href:n="/",className:r,showText:u=!0}=e,d=(0,s.jsxs)("div",{className:(0,a.Z)(o({size:t}),r),children:[(0,s.jsx)("div",{className:i({size:t}),children:(0,s.jsx)("span",{className:"drop-shadow-sm",children:"O"})}),u&&(0,s.jsx)("span",{className:c({size:t}),children:"Olaji"})]});return n?(0,s.jsx)(l.default,{href:n,children:d}):d}function d(e){let{className:t}=e;return(0,s.jsx)(u,{size:"sm",className:t})}function h(e){let{size:t="sm",className:n}=e;return(0,s.jsx)(u,{size:t,showText:!1,href:void 0,className:n})}},8234:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7437),l=n(2265),r=n(7019),a=n(5733),o=n(5950);function i(e){let[t,n]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.Z,{...e,type:t?"text":"password"}),(0,s.jsx)("button",{type:"button",onClick:()=>n(e=>!e),"aria-label":t?"Hide password":"Show password",className:"absolute right-3 top-[38px] text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors",children:t?(0,s.jsx)(r.Z,{size:18}):(0,s.jsx)(a.Z,{size:18})})]})}},5950:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437),l=n(4839);function r(e){let{id:t,label:n,type:r="text",value:a,onChange:o,placeholder:i,required:c,error:u,helperText:d,autoComplete:h}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:t,className:"label",children:n}),(0,s.jsx)("input",{id:t,type:r,value:a,onChange:o,placeholder:i,autoComplete:h,required:c,"aria-invalid":!!u,"aria-describedby":u?"".concat(t,"-error"):d?"".concat(t,"-help"):void 0,className:(0,l.Z)("input",u&&"input-invalid")}),u?(0,s.jsx)("p",{id:"".concat(t,"-error"),role:"alert",className:"error-text mt-1",children:u}):d?(0,s.jsx)("p",{id:"".concat(t,"-help"),className:"helper mt-1",children:d}):null]})}},857:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return o},a:function(){return i}});var s=n(7437),l=n(2265),r=n(6463);let a=(0,l.createContext)({token:null,active_school_id:null,isLoading:!0,login:async()=>{},logout:()=>{},setSchoolId:()=>{},isAuthenticated:!1});function o(e){let{children:t}=e,[n,o]=(0,l.useState)({token:null,active_school_id:null,isLoading:!0}),i=(0,r.useRouter)();(0,l.useEffect)(()=>{o({token:localStorage.getItem("token"),active_school_id:localStorage.getItem("active_school_id"),isLoading:!1})},[]);let c=async e=>{localStorage.setItem("token",e.token),o(t=>({...t,token:e.token,isLoading:!1}))},u={...n,login:c,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),o({token:null,active_school_id:null,isLoading:!1}),i.replace("/login")},setSchoolId:e=>{localStorage.setItem("active_school_id",e),o(t=>({...t,active_school_id:e}))},isAuthenticated:!!n.token&&!n.isLoading};return(0,s.jsx)(a.Provider,{value:u,children:t})}let i=()=>(0,l.useContext)(a)},7019:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8030).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5733:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(8030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},459:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});let s=n(8472).Z.create({baseURL:"http://localhost:8000",timeout:2e4});s.interceptors.request.use(e=>{let t=localStorage.getItem("token"),n=localStorage.getItem("active_school_id");return t&&(e.headers.Authorization="Bearer ".concat(t)),n&&(e.headers["X-School-ID"]=n),e}),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(console.error("Unauthorized request detected"),localStorage.removeItem("token"),localStorage.removeItem("active_school_id"),window.location.href="/login"),Promise.reject(e)})},1785:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var s=n(459);let l={async signup(e){let{data:t}=await s.h.post("/api/auth/register",e);return t.access_token&&localStorage.setItem("token",t.access_token),t.school_id&&localStorage.setItem("active_school_id",String(t.school_id)),{access_token:t.access_token,school_id:t.school_id}},async login(e){let{data:t}=await s.h.post("/api/auth/login",e);return t.access_token&&localStorage.setItem("token",t.access_token),t.school_id&&localStorage.setItem("active_school_id",String(t.school_id)),{access_token:t.access_token,school_id:t.school_id}},logout(){localStorage.removeItem("token"),localStorage.removeItem("active_school_id")}}},3027:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var s=n(4839);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=s.W,a=(e,t)=>n=>{var s;if((null==t?void 0:t.variants)==null)return r(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(e=>{let t=null==n?void 0:n[e],s=null==o?void 0:o[e];if(null===t)return null;let r=l(t)||l(s);return a[e][r]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,s]=t;return void 0===s||(e[n]=s),e},{});return r(e,i,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:n,className:s,...l}=t;return Object.entries(l).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...c}[t]):({...o,...c})[t]===n})?[...e,n,s]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}},4839:function(e,t,n){"use strict";function s(){for(var e,t,n=0,s="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=function e(t){var n,s,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(n=0;n<r;n++)t[n]&&(s=e(t[n]))&&(l&&(l+=" "),l+=s)}else for(s in t)t[s]&&(l&&(l+=" "),l+=s)}return l}(e))&&(s&&(s+=" "),s+=t);return s}n.d(t,{W:function(){return s}}),t.Z=s}},function(e){e.O(0,[236,48,971,23,744],function(){return e(e.s=476)}),_N_E=e.O()}]);