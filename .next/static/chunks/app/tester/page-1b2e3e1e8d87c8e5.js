(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{2396:function(e,t,s){Promise.resolve().then(s.bind(s,889))},889:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),r=s(2265),n=s(857),l=s(9344),i=s(3299),d=s(4207),c=s(1935),o=s(6127),m=s(3225),x=s(933),u=s(2940),p=s(5430);function g(){return(0,a.jsx)(l.WN,{requiredPermissions:["is_tester"],requiredRoles:["TESTER"],fallbackRoute:"/dashboard",children:(0,a.jsx)(h,{})})}function h(){var e,t,s,l,g,h,f,b;let{user:v}=(0,n.a)(),[y,j]=(0,r.useState)(null),[N,k]=(0,r.useState)([]),[_,w]=(0,r.useState)(!0),[S,Z]=(0,r.useState)(!0);(0,r.useEffect)(()=>{A(),L()},[]);let A=async()=>{try{w(!0);let e=await i.g.getStats({days_back:30});j(e)}catch(e){console.error("Failed to load stats:",e)}finally{w(!1)}},L=async()=>{try{Z(!0);let e=await i.g.getMySuggestions({limit:50});k(e)}catch(e){console.error("Failed to load suggestions:",e)}finally{Z(!1)}},z={total:N.length,pending:N.filter(e=>"pending"===e.status).length,approved:N.filter(e=>"approved"===e.status).length,rejected:N.filter(e=>"rejected"===e.status).length,implemented:N.filter(e=>"implemented"===e.status).length};return(0,a.jsx)("div",{className:"h-full overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Tester Dashboard"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Monitor system performance and track your contributions"})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"System Performance (Last 30 Days)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(d.Z,{className:"text-blue-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Total Messages"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:_?"...":(null==y?void 0:null===(e=y.total_messages)||void 0===e?void 0:e.toLocaleString())||"0"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Processed"})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(c.Z,{className:"text-red-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Issues"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:_?"...":(null==y?void 0:y.needs_attention)||0}),(0,a.jsxs)("p",{className:"text-xs text-neutral-500",children:[(null==y?void 0:y.total_messages)?"".concat((y.needs_attention/y.total_messages*100).toFixed(1),"%"):"0%"," of total"]})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(o.Z,{className:"text-orange-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Fallbacks"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:_?"...":(null==y?void 0:y.fallback_used)||0}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Used"})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(m.Z,{className:"text-green-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Success Rate"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:_?"...":(null==y?void 0:y.total_messages)?"".concat(((y.total_messages-y.needs_attention)/y.total_messages*100).toFixed(1),"%"):"0%"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Handled well"})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"Your Suggestions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(x.Z,{className:"text-gray-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Pending"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-600",children:S?"...":z.pending}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Under Review"})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(u.Z,{className:"text-green-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Approved"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:S?"...":z.approved}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Ready to Deploy"})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(p.Z,{className:"text-purple-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Implemented"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:S?"...":z.implemented}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Live in System"})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(m.Z,{className:"text-blue-600 flex-shrink-0",size:16}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Success Rate"})]}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:S?"...":z.total>0?"".concat(Math.round((z.approved+z.implemented)/z.total*100),"%"):"0%"}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:"Acceptance"})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"Problem Queue"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Review problematic messages that need tester attention."}),(0,a.jsx)("button",{onClick:()=>window.location.href="/tester/queue",className:"btn-primary w-full",children:"View Queue"})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"My Suggestions"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Track suggestions you've submitted for improving AI responses."}),(0,a.jsx)("button",{onClick:()=>window.location.href="/tester/suggestions",className:"btn btn-secondary w-full",children:"View Suggestions"})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"Analytics"}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"View detailed analytics and trends for system performance."}),(0,a.jsx)("button",{onClick:()=>window.location.href="/tester/stats",className:"btn btn-secondary w-full",children:"View Analytics"})]})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 text-neutral-900 dark:text-neutral-100",children:"Your Tester Permissions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Tester:"}),(0,a.jsx)("span",{className:(null==v?void 0:null===(t=v.permissions)||void 0===t?void 0:t.is_tester)?"text-green-600":"text-red-600",children:(null==v?void 0:null===(s=v.permissions)||void 0===s?void 0:s.is_tester)?"Yes":"No"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Admin:"}),(0,a.jsx)("span",{className:(null==v?void 0:null===(l=v.permissions)||void 0===l?void 0:l.is_admin)?"text-green-600":"text-red-600",children:(null==v?void 0:null===(g=v.permissions)||void 0===g?void 0:g.is_admin)?"Yes":"No"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Super Admin:"}),(0,a.jsx)("span",{className:(null==v?void 0:null===(h=v.permissions)||void 0===h?void 0:h.is_super_admin)?"text-green-600":"text-red-600",children:(null==v?void 0:null===(f=v.permissions)||void 0===f?void 0:f.is_super_admin)?"Yes":"No"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Submit Suggestions:"}),(0,a.jsx)("span",{className:"text-green-600",children:"Yes"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"View Problem Queue:"}),(0,a.jsx)("span",{className:"text-green-600",children:"Yes"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-neutral-600 dark:text-neutral-400",children:"Roles: "}),(0,a.jsx)("span",{className:"text-neutral-900 dark:text-neutral-100",children:(null==v?void 0:null===(b=v.roles)||void 0===b?void 0:b.join(", "))||"None"})]})]})]})]})]})})}},8030:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(2265);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:o="",children:m,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...c,width:r,height:r,stroke:s,strokeWidth:l?24*Number(n)/Number(r):n,className:i("lucide",o),...!m&&!d(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:d,...c}=s;return(0,a.createElement)(o,{ref:n,iconNode:t,className:i("lucide-".concat(r(l(e))),"lucide-".concat(e),d),...c})});return s.displayName=l(e),s}},4207:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},2940:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1935:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},3225:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5430:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},3299:function(e,t,s){"use strict";s.d(t,{g:function(){return n}});var a=s(459);class r{async getQueue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return e.priority&&t.append("priority",e.priority.toString()),e.issue_type&&t.append("issue_type",e.issue_type),e.limit&&t.append("limit",e.limit.toString()),e.days_back&&t.append("days_back",e.days_back.toString()),e.school_id&&t.append("school_id",e.school_id),void 0!==e.show_suggested&&t.append("show_suggested",e.show_suggested.toString()),(await a.x.get("/api/tester/queue?".concat(t.toString()))).data}async getConversation(e,t){try{return(await a.x.get("/api/tester/conversation/".concat(e).concat(t?"?message_id=".concat(t):""))).data}catch(r){var s;if((null===(s=r.response)||void 0===s?void 0:s.status)===404)try{let s=(await a.x.get("/api/chat/conversations/".concat(e,"/messages"))).data.map(e=>({id:e.id||e.message_id,content:e.content||e.user_message||e.assistant_response,role:"USER"===e.message_type?"user":"assistant",timestamp:e.created_at,intent:e.intent,rating:e.rating,processing_time_ms:e.processing_time_ms,is_problematic:!!t&&(e.id===t||e.message_id===t)}));if(t){let e=s.findIndex(e=>e.id===t);if(e>0){let t=s.slice(0,e).reverse().find(e=>"user"===e.role),a=s[e];return t?[t,a]:[a]}return s.filter(e=>e.id===t)}return s}catch(e){throw Error("Unable to load conversation. This feature may not be available yet.")}throw r}}async submitSuggestion(e){let t={user_query:"regex_pattern",ai_response:"prompt_template",regex_pattern:"regex_pattern",prompt_template:"prompt_template",intent_mapping:"intent_mapping",handler_improvement:"handler_improvement"}[e.suggestion_type]||e.suggestion_type,s={message_id:e.message_id,routing_log_id:e.routing_log_id,suggestion_type:t,title:e.title,description:e.description,handler:e.handler,intent:e.intent,pattern:e.pattern,template_text:e.template_text,priority:e.priority||"medium",tester_note:e.tester_note};return(await a.x.post("/api/tester/suggestions",s)).data}async getMySuggestions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return e.limit&&t.append("limit",e.limit.toString()),e.status&&t.append("status",e.status),e.suggestion_type&&t.append("suggestion_type",e.suggestion_type),(await a.x.get("/api/tester/suggestions?".concat(t.toString()))).data}async getStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return e.days_back&&t.append("days_back",e.days_back.toString()),e.school_id&&t.append("school_id",e.school_id),(await a.x.get("/api/tester/stats?".concat(t.toString()))).data}async getFilters(){return(await a.x.get("/api/tester/filters")).data}getSuggestionTypes(){return[{value:"regex_pattern",label:"Regex Pattern",description:"Add or improve message classification patterns"},{value:"prompt_template",label:"Prompt Template",description:"Improve response templates for better answers"},{value:"intent_mapping",label:"Intent Mapping",description:"Better intent classification for specific handlers"},{value:"handler_improvement",label:"Handler Improvement",description:"General handler behavior improvements"}]}getPriorityLevels(){return[{value:"critical",label:"Critical",description:"Urgent fixes for broken responses"},{value:"high",label:"High",description:"Important improvements for common issues"},{value:"medium",label:"Medium",description:"General improvements and optimizations"},{value:"low",label:"Low",description:"Minor enhancements and edge cases"}]}getIssueTypeLabels(){return{negative_rating:"User gave thumbs down",fallback:"Fallback response used",low_confidence:"Low classification confidence",unhandled:"Unhandled intent"}}getPriorityLabels(){return{1:"High",2:"Medium",3:"Low"}}getPriorityColor(e){switch(e){case 1:return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";case 2:return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}}getIssueTypeColor(e){switch(e){case"negative_rating":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";case"fallback":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200";case"low_confidence":return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";case"unhandled":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}}getSuggestionStatusColor(e){switch(e){case"pending":default:return"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200";case"approved":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";case"rejected":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";case"implemented":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200"}}}let n=new r}},function(e){e.O(0,[236,344,971,23,744],function(){return e(e.s=2396)}),_N_E=e.O()}]);