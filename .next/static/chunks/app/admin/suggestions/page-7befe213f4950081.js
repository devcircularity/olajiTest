(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[840],{5846:function(e,t,s){Promise.resolve().then(s.bind(s,4178))},4178:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),n=s(2265),r=s(857),i=s(459);class l{async getSuggestions(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.suggestion_type)&&t.append("suggestion_type",e.suggestion_type),(null==e?void 0:e.priority)&&t.append("priority",e.priority),(null==e?void 0:e.created_by)&&t.append("created_by",e.created_by),(null==e?void 0:e.school_id)&&t.append("school_id",e.school_id),(null==e?void 0:e.pending_only)&&t.append("pending_only","true"),(await i.x.get("/api/admin/suggestions?".concat(t.toString()))).data}async getSuggestionStats(){return(await i.x.get("/api/admin/suggestions/stats")).data}async getEnhancedSuggestionStats(){return(await i.x.get("/api/admin/suggestions/stats-enhanced")).data}async getSuggestion(e){return(await i.x.get("/api/admin/suggestions/".concat(e))).data}async reviewSuggestion(e,t){return(await i.x.post("/api/admin/suggestions/".concat(e,"/review"),t)).data}async reviewSuggestionEnhanced(e,t){return(await i.x.post("/api/admin/suggestions/".concat(e,"/review-enhanced"),t)).data}async implementSuggestion(e){return(await i.x.post("/api/admin/suggestions/".concat(e,"/implement"))).data}async markSuggestionAddressed(e,t){return(await i.x.post("/api/admin/suggestions/".concat(e,"/mark-addressed"),{completion_notes:t})).data}async createActionItem(e,t){return(await i.x.post("/api/admin/suggestions/".concat(e,"/action-items"),t)).data}async getSuggestionActionItems(e){return(await i.x.get("/api/admin/suggestions/".concat(e,"/action-items"))).data}async updateActionItemStatus(e,t,s){return(await i.x.patch("/api/admin/suggestions/action-items/".concat(e),{status:t,completion_notes:s})).data}async completeActionItem(e,t){return(await i.x.post("/api/admin/suggestions/action-items/".concat(e,"/complete"),{completion_notes:t})).data}async getAllActionItems(e){let t=new URLSearchParams;return(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.priority)&&t.append("priority",e.priority),(null==e?void 0:e.implementation_type)&&t.append("implementation_type",e.implementation_type),(null==e?void 0:e.assigned_to)&&t.append("assigned_to",e.assigned_to),(null==e?void 0:e.due_date_before)&&t.append("due_date_before",e.due_date_before),(null==e?void 0:e.due_date_after)&&t.append("due_date_after",e.due_date_after),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(await i.x.get("/api/admin/suggestions/action-items?".concat(t.toString()))).data}async getTesterQueue(e){let t=new URLSearchParams;return(null==e?void 0:e.priority)&&t.append("priority",e.priority.toString()),(null==e?void 0:e.issue_type)&&t.append("issue_type",e.issue_type),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.days_back)&&t.append("days_back",e.days_back.toString()),(null==e?void 0:e.school_id)&&t.append("school_id",e.school_id),(await i.x.get("/api/tester/queue?".concat(t.toString()))).data}async submitTesterSuggestion(e){return(await i.x.post("/api/tester/suggestions",e)).data}async getMyTesterSuggestions(e){let t=new URLSearchParams;return(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.suggestion_type)&&t.append("suggestion_type",e.suggestion_type),(await i.x.get("/api/tester/suggestions?".concat(t.toString()))).data}async getTesterStats(e){let t=new URLSearchParams;return(null==e?void 0:e.days_back)&&t.append("days_back",e.days_back.toString()),(null==e?void 0:e.school_id)&&t.append("school_id",e.school_id),(await i.x.get("/api/tester/stats?".concat(t.toString()))).data}async getTesterFilters(){return(await i.x.get("/api/tester/filters")).data}}let d=new l;var c=s(7886),o=s(933),m=s(2940),x=s(4697),u=s(8030);let p=(0,u.Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var g=s(5733),h=s(2513);let b=(0,u.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var y=s(6780);let j=(0,u.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var f=s(4308);function v(e){let{suggestion:t,onClose:s,onReview:r,onCreateActionItem:i,onMarkAddressed:l}=e,[d,c]=(0,n.useState)("details"),[u,g]=(0,n.useState)(!1),[v,N]=(0,n.useState)(t.admin_analysis||""),[w,k]=(0,n.useState)(t.implementation_notes||""),[_,S]=(0,n.useState)(t.action_items||[]),[A,C]=(0,n.useState)({title:"",description:"",priority:"medium",implementation_type:"other",due_date:""}),[Z,z]=(0,n.useState)(!1),[P,M]=(0,n.useState)(""),I=async e=>{try{await r(t.id,{status:e,admin_note:"Status: ".concat(e),admin_analysis:v,implementation_notes:w,create_action_items:_.length>0,action_items:_.filter(e=>!e.id)}),s()}catch(e){console.error("Failed to review suggestion:",e)}},D=async()=>{if(A.title.trim())try{await i(t.id,{...A,suggestion_id:t.id,due_date:A.due_date?new Date(A.due_date).toISOString():void 0}),C({title:"",description:"",priority:"medium",implementation_type:"other",due_date:""}),z(!1),s()}catch(e){console.error("Failed to create action item:",e)}},R=async()=>{if(P.trim())try{await l(t.id,P),s()}catch(e){console.error("Failed to mark as addressed:",e)}},T=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=e=>{switch(e){case"pattern":return"bg-blue-100 text-blue-800";case"template":return"bg-green-100 text-green-800";case"code_fix":return"bg-red-100 text-red-800";case"documentation":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:s}),(0,a.jsx)("div",{className:"relative bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 sm:mb-6 gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-bold break-words",children:t.title}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-neutral-600 mt-1",children:["Submitted by ",t.created_by_name," on ",new Date(t.created_at).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(T(t.priority)),children:t.priority}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.suggestion_type.replace("_"," ")})]})]}),(0,a.jsx)(f.default,{onClick:s,className:"btn-secondary text-neutral-500 flex-shrink-0",children:(0,a.jsx)(x.Z,{size:16})})]}),(0,a.jsx)("div",{className:"border-b border-neutral-200 dark:border-neutral-700 mb-4 sm:mb-6",children:(0,a.jsx)("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto",children:["details","analysis","actions"].map(e=>(0,a.jsx)("button",{onClick:()=>c(e),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm capitalize whitespace-nowrap ".concat(d===e?"border-blue-500 text-blue-600":"border-transparent text-neutral-500 hover:text-neutral-700"),children:e},e))})}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:["details"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Description"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-neutral-50 dark:bg-neutral-700 rounded-lg text-sm",children:t.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Handler"}),(0,a.jsx)("code",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs sm:text-sm block break-all",children:t.handler})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Intent"}),(0,a.jsx)("code",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs sm:text-sm block break-all",children:t.intent})]})]}),t.pattern&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Proposed Pattern"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200",children:(0,a.jsx)("code",{className:"text-xs sm:text-sm break-all",children:t.pattern})}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"Note: This is a suggested pattern that may need refinement"})]}),t.template_text&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Proposed Template"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200",children:(0,a.jsx)("div",{className:"text-xs sm:text-sm whitespace-pre-wrap",children:t.template_text})}),(0,a.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:"Note: This is a suggested template that may need refinement"})]}),t.tester_note&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Tester's Note"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200",children:(0,a.jsx)("div",{className:"text-xs sm:text-sm",children:t.tester_note})})]}),t.original_message&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Original User Message"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-neutral-50 dark:bg-neutral-700 rounded-lg",children:(0,a.jsxs)("div",{className:"text-xs sm:text-sm",children:['"',t.original_message,'"']})})]}),t.assistant_response&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Current AI Response"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200",children:(0,a.jsx)("div",{className:"text-xs sm:text-sm whitespace-pre-wrap",children:t.assistant_response})})]})]}),"analysis"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 rounded-lg p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(p,{className:"text-yellow-600 mt-0.5 flex-shrink-0",size:16}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200 text-sm sm:text-base",children:"Admin Analysis Required"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-yellow-700 dark:text-yellow-300",children:"Please analyze this suggestion and determine the appropriate action items needed for implementation."})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Admin Analysis"}),(0,a.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),placeholder:"Analyze what this suggestion is asking for and what needs to be done to address it...",className:"w-full p-3 sm:p-4 border border-neutral-200 rounded-lg min-h-[120px] text-xs sm:text-sm",disabled:!u&&"pending"!==t.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Implementation Notes"}),(0,a.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),placeholder:"Specific notes on how to implement this suggestion (e.g., 'Create a pattern for class count queries', 'Update error handling template')...",className:"w-full p-3 sm:p-4 border border-neutral-200 rounded-lg min-h-[100px] text-xs sm:text-sm",disabled:!u&&"pending"!==t.status})]}),t.tester_note&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Tester Note"}),(0,a.jsx)("div",{className:"p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,a.jsx)("div",{className:"text-xs sm:text-sm",children:t.tester_note})})]})]}),"actions"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm sm:text-base",children:"Action Items"}),"approved"===t.status&&(0,a.jsxs)(f.default,{onClick:()=>z(!0),className:"btn-secondary flex items-center gap-2 text-sm",children:[(0,a.jsx)(h.Z,{size:14}),"Add Action Item"]})]}),_.length>0?(0,a.jsx)("div",{className:"space-y-3",children:_.map(e=>(0,a.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-2 gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm sm:text-base",children:e.title}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(T(e.priority)),children:e.priority}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(F(e.implementation_type)),children:e.implementation_type.replace("_"," ")})]})]}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-neutral-600 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs text-neutral-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{size:12}),"Created ",new Date(e.created_at).toLocaleDateString()]}),e.due_date&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(b,{size:12}),"Due ",new Date(e.due_date).toLocaleDateString()]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-6 sm:py-8 text-neutral-500",children:[(0,a.jsx)(y.Z,{size:24,className:"mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"text-sm",children:"No action items created yet"}),"approved"===t.status&&(0,a.jsx)("p",{className:"text-xs mt-1",children:"Create action items to track implementation progress"})]}),Z&&(0,a.jsxs)("div",{className:"border border-neutral-200 rounded-lg p-3 sm:p-4 bg-neutral-50",children:[(0,a.jsx)("h4",{className:"font-medium mb-3 sm:mb-4 text-sm sm:text-base",children:"Create Action Item"}),(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Title"}),(0,a.jsx)("input",{type:"text",value:A.title,onChange:e=>C({...A,title:e.target.value}),placeholder:"e.g., Create pattern for class count queries",className:"w-full p-2 border border-neutral-200 rounded text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:A.description,onChange:e=>C({...A,description:e.target.value}),placeholder:"Detailed description of what needs to be done...",className:"w-full p-2 border border-neutral-200 rounded text-sm",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Priority"}),(0,a.jsxs)("select",{value:A.priority,onChange:e=>C({...A,priority:e.target.value}),className:"w-full p-2 border border-neutral-200 rounded text-sm",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Type"}),(0,a.jsxs)("select",{value:A.implementation_type,onChange:e=>C({...A,implementation_type:e.target.value}),className:"w-full p-2 border border-neutral-200 rounded text-sm",children:[(0,a.jsx)("option",{value:"pattern",children:"Create Pattern"}),(0,a.jsx)("option",{value:"template",children:"Create Template"}),(0,a.jsx)("option",{value:"code_fix",children:"Code Fix"}),(0,a.jsx)("option",{value:"documentation",children:"Documentation"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Due Date (Optional)"}),(0,a.jsx)("input",{type:"date",value:A.due_date,onChange:e=>C({...A,due_date:e.target.value}),className:"w-full p-2 border border-neutral-200 rounded text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsx)(f.default,{onClick:D,className:"flex-1 text-sm",children:"Create Action Item"}),(0,a.jsx)(f.default,{onClick:()=>z(!1),className:"btn-secondary flex-1 text-sm",children:"Cancel"})]})]})]}),"approved"===t.status&&_.some(e=>"completed"===e.status)&&(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3 text-sm sm:text-base",children:"Mark Suggestion as Addressed"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("textarea",{value:P,onChange:e=>M(e.target.value),placeholder:"Describe how this suggestion was addressed (e.g., 'Created pattern for class count queries in candidate configuration')...",className:"w-full p-3 border border-neutral-200 rounded-lg text-sm",rows:3}),(0,a.jsxs)(f.default,{onClick:R,disabled:!P.trim(),className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(m.Z,{size:16}),"Mark as Addressed"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 pt-4 sm:pt-6 border-t",children:["pending"===t.status&&(0,a.jsx)(a.Fragment,{children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.default,{onClick:()=>I("approved"),className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(j,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Approve for Action Items"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Approve"})]}),(0,a.jsxs)(f.default,{onClick:()=>I("needs_analysis"),className:"btn-secondary flex items-center gap-2 text-sm",children:[(0,a.jsx)(y.Z,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Needs More Analysis"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Needs Analysis"})]}),(0,a.jsxs)(f.default,{onClick:()=>I("rejected"),className:"btn-danger flex items-center gap-2 text-sm",children:[(0,a.jsx)(x.Z,{size:16}),"Reject"]})]}):(0,a.jsx)(f.default,{onClick:()=>g(!0),className:"flex-1 text-sm",children:"Start Review"})}),"approved"===t.status&&(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-green-600 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{size:16,className:"flex-shrink-0"}),"Approved - Create action items to track implementation"]}),"implemented"===t.status&&(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-purple-600 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{size:16,className:"flex-shrink-0"}),"Suggestion has been addressed"]})]})]})})]})}function N(){var e,t,s;let{user:i}=(0,r.a)(),[l,u]=(0,n.useState)([]),[b,y]=(0,n.useState)(null),[j,f]=(0,n.useState)(!0),[N,w]=(0,n.useState)("pending"),[k,_]=(0,n.useState)(null),[S,A]=(0,n.useState)({currentPage:1,totalPages:1,total:0,hasNext:!1});(0,n.useEffect)(()=>{C(),Z()},[N]);let C=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{f(!0);let t=await d.getSuggestions({page:e,limit:20,status:"all"===N?void 0:N,pending_only:"pending"===N});u(t.suggestions),A({currentPage:t.page,totalPages:Math.ceil(t.total/20),total:t.total,hasNext:t.has_next})}catch(e){console.error("Failed to load suggestions:",e)}finally{f(!1)}},Z=async()=>{try{let e=await d.getSuggestionStats();y(e)}catch(e){console.error("Failed to load stats:",e)}},z=async(e,t)=>{try{await d.reviewSuggestionEnhanced(e,t),C(S.currentPage),Z()}catch(e){throw console.error("Failed to review suggestion:",e),e}},P=async(e,t)=>{try{await d.createActionItem(e,t),C(S.currentPage),Z()}catch(e){throw console.error("Failed to create action item:",e),e}},M=async(e,t)=>{try{await d.markSuggestionAddressed(e,t),C(S.currentPage),Z()}catch(e){throw console.error("Failed to mark as addressed:",e),e}},I=[{key:"created_at",label:"Submitted",render:e=>(0,a.jsx)("span",{className:"text-xs sm:text-sm",children:new Date(e).toLocaleDateString()}),width:"100px"},{key:"created_by_name",label:"Submitted By",render:e=>(0,a.jsx)("span",{className:"text-xs sm:text-sm truncate",children:e}),width:"150px"},{key:"suggestion_type",label:"Type",render:e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("regex_pattern"===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200":"prompt_template"===e?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"intent_mapping"===e?"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200":"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200"),children:e.replace("_"," ")}),width:"140px"},{key:"title",label:"Title",render:(e,t)=>(0,a.jsxs)("div",{className:"max-w-xs",children:[(0,a.jsx)("div",{className:"truncate font-medium text-xs sm:text-sm",title:e,children:e}),t.action_items&&t.action_items.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.Z,{size:12,className:"text-blue-500"}),(0,a.jsxs)("span",{className:"text-xs text-blue-600",children:[t.action_items.length," action item",t.action_items.length>1?"s":""]})]})]})},{key:"priority",label:"Priority",render:e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("critical"===e?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":"high"===e?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200":"medium"===e?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"),children:e}),width:"100px"},{key:"status",label:"Status",render:(e,t)=>{let s=null,n="";switch(e){case"approved":s=(0,a.jsx)(m.Z,{size:12}),n="bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200";break;case"rejected":s=(0,a.jsx)(x.Z,{size:12}),n="bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200";break;case"implemented":s=(0,a.jsx)(m.Z,{size:12}),n="bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200";break;case"needs_analysis":s=(0,a.jsx)(p,{size:12}),n="bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200";break;default:s=(0,a.jsx)(o.Z,{size:12}),n="bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"}return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(n),children:[s,e.replace("_"," ")]})},width:"120px"}],D=[{label:"View Details",icon:(0,a.jsx)(g.Z,{size:14}),onClick:e=>_(e),variant:"secondary"},{label:"Create Action Item",icon:(0,a.jsx)(h.Z,{size:14}),onClick:e=>{_(e)},variant:"primary",disabled:e=>"approved"!==e.status}];return(null==i?void 0:null===(e=i.permissions)||void 0===e?void 0:e.is_tester)||(null==i?void 0:null===(t=i.permissions)||void 0===t?void 0:t.is_admin)||(null==i?void 0:null===(s=i.permissions)||void 0===s?void 0:s.is_super_admin)?(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Tester Suggestions"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-neutral-600",children:"Review suggestions and create action items for implementation"})]})}),(0,a.jsx)("div",{className:"card p-3 sm:p-4 mb-4 sm:mb-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("div",{className:"flex items-start gap-2 sm:gap-3",children:[(0,a.jsx)(p,{className:"text-blue-600 mt-1 flex-shrink-0",size:16}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2 text-sm sm:text-base",children:"Enhanced Suggestion Workflow"}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Review:"})," Analyze suggestions and determine what needs to be done"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Create Action Items:"})," Break down implementation into specific tasks"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Track Progress:"})," Monitor completion of action items"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Manual Implementation:"})," Admin creates patterns/templates as needed"]})]})]})]})}),b&&(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Total"}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:b.total_suggestions})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Pending"}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:b.pending})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Approved"}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:b.approved})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600 truncate",children:"Need Analysis"}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-yellow-600",children:b.needs_analysis||0})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Rejected"}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-red-600",children:b.rejected})]}),(0,a.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600",children:"Addressed"}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:b.implemented})]})]}),(0,a.jsx)("div",{className:"card p-3 sm:p-4 mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-center",children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium",children:"Filter by Status:"}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"input w-full sm:w-48 text-sm",children:[(0,a.jsx)("option",{value:"pending",children:"Pending Review"}),(0,a.jsx)("option",{value:"needs_analysis",children:"Needs Analysis"}),(0,a.jsx)("option",{value:"approved",children:"Approved (Ready for Action Items)"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"implemented",children:"Addressed"}),(0,a.jsx)("option",{value:"all",children:"All"})]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)(c.Z,{data:l,columns:I,actions:D,loading:j,searchable:!0,searchPlaceholder:"Search suggestions...",pagination:{currentPage:S.currentPage,totalPages:S.totalPages,onPageChange:C},emptyMessage:"No suggestions found",className:"text-xs sm:text-sm"})}),k&&(0,a.jsx)(v,{suggestion:k,onClose:()=>_(null),onReview:z,onCreateActionItem:P,onMarkAddressed:M})]}):(0,a.jsx)("div",{className:"p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-neutral-600",children:"You don't have permission to access the tester queue."})]})})}},8030:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(2265);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:m,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...c,width:n,height:n,stroke:s,strokeWidth:i?24*Number(r)/Number(n):r,className:l("lucide",o),...!m&&!d(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:d,...c}=s;return(0,a.createElement)(o,{ref:r,iconNode:t,className:l("lucide-".concat(n(i(e))),"lucide-".concat(e),d),...c})});return s.displayName=i(e),s}},518:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7592:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6780:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2940:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},5733:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4839:function(e,t,s){"use strict";function a(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=e(t[s]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a}s.d(t,{W:function(){return a}}),t.Z=a}},function(e){e.O(0,[236,745,971,23,744],function(){return e(e.s=5846)}),_N_E=e.O()}]);