(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{4479:function(e,t,a){Promise.resolve().then(a.bind(a,136))},136:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var s=a(7437),n=a(2265),l=a(857),i=a(9541),r=a(6706),c=a(4308);function d(e){let{size:t="md",className:a="",text:n="Loading..."}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 ".concat(a),children:[(0,s.jsx)("div",{className:"animate-spin rounded-full border-2 border-neutral-200 border-t-[--color-brand] ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])}),n&&(0,s.jsx)("p",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-400",children:n})]})}var o=a(8030);let m=(0,o.Z)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);var x=a(7390),p=a(4207),h=a(2940),u=a(6780),g=a(4258),f=a(8094),v=a(497);function j(e){let{overview:t}=e,[a,l]=(0,n.useState)(""),[r,d]=(0,n.useState)(null),[o,j]=(0,n.useState)(!1),b=async()=>{if(a.trim())try{j(!0);let e=await i.q.testClassify({message:a});d(e)}catch(e){console.error("Test failed:",e)}finally{j(!1)}};return(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(m,{size:14,className:"text-blue-600 flex-shrink-0"}),(0,s.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600 truncate",children:"Total Patterns"})]}),(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:t.totalPatterns}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500",children:[t.enabledPatterns," enabled"]})]}),(0,s.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(x.Z,{size:14,className:"text-green-600 flex-shrink-0"}),(0,s.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600 truncate",children:"Total Templates"})]}),(0,s.jsx)("p",{className:"text-lg sm:text-2xl font-bold",children:t.totalTemplates}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500",children:[t.enabledTemplates," enabled"]})]}),(0,s.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(p.Z,{size:14,className:"text-purple-600 flex-shrink-0"}),(0,s.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600 truncate",children:"System Health"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:["healthy"===t.systemHealth?(0,s.jsx)(h.Z,{size:16,className:"text-green-600 flex-shrink-0"}):(0,s.jsx)(u.Z,{size:16,className:"text-orange-600 flex-shrink-0"}),(0,s.jsx)("span",{className:"font-bold capitalize text-sm sm:text-base truncate",children:t.systemHealth})]})]}),(0,s.jsxs)("div",{className:"card p-3 sm:p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(g.Z,{size:14,className:"text-gray-600 flex-shrink-0"}),(0,s.jsx)("h3",{className:"text-xs sm:text-sm font-medium text-neutral-600 truncate",children:"Cache Status"})]}),(0,s.jsx)("p",{className:"text-sm sm:text-lg font-bold capitalize truncate",children:t.cacheStatus})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,s.jsxs)("div",{className:"card p-4 sm:p-6",children:[(0,s.jsxs)("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[(0,s.jsx)(f.Z,{size:16,className:"text-green-600 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:"Active Configuration"})]}),t.activeVersion?(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Name:"}),(0,s.jsx)("span",{className:"truncate ml-2",children:t.activeVersion.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Patterns:"}),(0,s.jsx)("span",{children:t.activeVersion.pattern_count})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Templates:"}),(0,s.jsx)("span",{children:t.activeVersion.template_count})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Activated:"}),(0,s.jsx)("span",{className:"truncate ml-2",children:t.activeVersion.activated_at?new Date(t.activeVersion.activated_at).toLocaleDateString():"N/A"})]})]}):(0,s.jsx)("p",{className:"text-red-600 text-sm",children:"No active configuration found!"})]}),(0,s.jsxs)("div",{className:"card p-4 sm:p-6",children:[(0,s.jsxs)("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[(0,s.jsx)(g.Z,{size:16,className:"text-blue-600 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:"Candidate Configuration"})]}),t.candidateVersion?(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Name:"}),(0,s.jsx)("span",{className:"truncate ml-2",children:t.candidateVersion.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Patterns:"}),(0,s.jsx)("span",{children:t.candidateVersion.pattern_count})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Templates:"}),(0,s.jsx)("span",{children:t.candidateVersion.template_count})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("strong",{children:"Created:"}),(0,s.jsx)("span",{className:"truncate ml-2",children:new Date(t.candidateVersion.created_at).toLocaleDateString()})]})]}):(0,s.jsx)("p",{className:"text-neutral-600 text-sm",children:"No candidate configuration"})]})]}),(0,s.jsxs)("div",{className:"card p-4 sm:p-6",children:[(0,s.jsxs)("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[(0,s.jsx)(v.Z,{size:16,className:"flex-shrink-0"}),(0,s.jsx)("span",{children:"Quick Classification Test"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Enter a message to test classification...",className:"input flex-1 text-sm"}),(0,s.jsxs)(c.default,{onClick:b,disabled:o||!a.trim(),className:"flex items-center gap-2 whitespace-nowrap",children:[(0,s.jsx)(v.Z,{size:16}),o?"Testing...":"Test"]})]}),r&&(0,s.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-800 p-3 sm:p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Result:"}),(0,s.jsx)("pre",{className:"text-xs sm:text-sm overflow-auto",children:JSON.stringify(r.final_decision,null,2)})]})]})]})}var b=a(5733),y=a(6649),N=a(883),w=a(4817),k=a(2513);let C=(0,o.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var _=a(7886),S=a(4697);let Z=(0,o.Z)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),V=(0,o.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function P(e){let{item:t,availableHandlers:a,availableIntents:l,onSave:r,onClose:d,onChange:o}=e,[m,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(l);(0,n.useEffect)(()=>{(async()=>{if(t.item.handler){g(!0);try{let e=await i.q.getAvailableIntents(t.item.handler);v(e.intents)}catch(e){console.error("Failed to load intents for handler:",e),v(l)}finally{g(!1)}}else v(l)})()},[t.item.handler,l]);let j=(e,a)=>{o({...t,item:{...t.item,[e]:a}})},b=(e,a)=>{let s=[...t.item.phrases||[]];s[e]=a,j("phrases",s)},y=e=>{j("phrases",(t.item.phrases||[]).filter((t,a)=>a!==e))},w=async()=>{var e;let a=t.item,s=(null===(e=a.phrases)||void 0===e?void 0:e.filter(e=>e.trim()))||[];if(0===s.length){alert("Please add at least one phrase before generating regex");return}x(!0);try{let e=await i.q.generateRegexFromPhrases({phrases:s,intent:a.intent,pattern_kind:a.kind});e.errors&&e.errors.length>0&&(console.warn("Regex generation warnings:",e.errors),alert("Regex generation warnings: ".concat(e.errors.join(", "))));let n=e.generated_regex||"",l=e.confidence||0,r=e.explanation||"",c={...t,item:{...t.item,pattern:n,regex_confidence:l,regex_explanation:r}};o(c),n&&h(!0)}catch(e){console.error("Failed to generate regex:",e),alert("Failed to generate regex. Please try again or enter manually.")}finally{x(!1)}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:d}),(0,s.jsx)("div",{className:"relative bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 sm:mb-6",children:[(0,s.jsxs)("h2",{className:"text-lg sm:text-xl font-bold",children:[t.isNew?"Add":"Edit"," Pattern"]}),(0,s.jsx)(c.default,{onClick:d,className:"text-sm btn-secondary",children:(0,s.jsx)(S.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Handler"}),(0,s.jsxs)("select",{value:t.item.handler,onChange:e=>j("handler",e.target.value),className:"input text-sm",children:[(0,s.jsx)("option",{value:"",children:"Select handler..."}),a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Intent"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:t.item.intent,onChange:e=>j("intent",e.target.value),className:"input text-sm",disabled:u,children:[(0,s.jsx)("option",{value:"",children:u?"Loading intents...":t.item.handler?"Select intent...":"Select handler first..."}),f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),u&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Kind"}),(0,s.jsxs)("select",{value:t.item.kind,onChange:e=>j("kind",e.target.value),className:"input text-sm",children:[(0,s.jsx)("option",{value:"positive",children:"Positive"}),(0,s.jsx)("option",{value:"negative",children:"Negative"}),(0,s.jsx)("option",{value:"synonym",children:"Synonym"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Priority"}),(0,s.jsx)("input",{type:"number",value:t.item.priority,onChange:e=>j("priority",parseInt(e.target.value)),className:"input text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"School Scope (Optional)"}),(0,s.jsx)("input",{type:"text",value:t.item.scope_school_id||"",onChange:e=>j("scope_school_id",e.target.value||void 0),placeholder:"Leave empty for global",className:"input text-sm"})]})]}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Example Phrases (Recommended)"}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:"Add natural language examples. We'll automatically generate the regex for you."})]}),(0,s.jsx)(c.default,{onClick:()=>h(!p),className:"text-xs btn-secondary",children:p?"Hide Advanced":"Show Advanced"})]}),(0,s.jsx)("textarea",{value:t.item.pattern,onChange:e=>j("pattern",e.target.value),placeholder:"Regex will be generated automatically from phrases...",className:"input font-mono text-sm",rows:3,readOnly:!p}),t.item.regex_confidence&&(0,s.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Confidence:"}),(0,s.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat(t.item.regex_confidence>=.8?"bg-green-100 text-green-700":t.item.regex_confidence>=.6?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[Math.round(100*t.item.regex_confidence),"%"]})]}),t.item.regex_explanation&&(0,s.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:t.item.regex_explanation})]}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-2",children:p?"Advanced: You can manually edit the regex pattern here":"The regex is auto-generated from your phrases. Click 'Show Advanced' to edit manually."})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.item.enabled,onChange:e=>j("enabled",e.target.checked),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Enabled"})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(c.default,{onClick:()=>{j("phrases",[...t.item.phrases||[],""])},className:"flex items-center gap-2 text-sm btn-secondary",children:[(0,s.jsx)(k.Z,{size:14}),"Add Phrase"]}),(0,s.jsx)("div",{className:"space-y-2",children:(t.item.phrases||[""]).map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>b(a,e.target.value),placeholder:'Example: "show me student details"',className:"input flex-1 text-sm"}),(t.item.phrases||[]).length>1&&(0,s.jsx)(c.default,{onClick:()=>y(a),className:"px-2 text-sm btn-secondary",children:(0,s.jsx)(N.Z,{size:14})})]},a))}),(t.item.phrases||[]).some(e=>e.trim())&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)(c.default,{onClick:w,disabled:m,className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(Z,{size:16}),m?"Generating...":"Generate Regex from Phrases"]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-2 gap-2",children:(0,s.jsx)("label",{className:"label text-sm",children:"Generated Regex Pattern"})}),(0,s.jsx)("textarea",{readOnly:!0,value:t.item.pattern||"",className:"input font-mono text-sm",rows:4})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6 pt-4 border-t",children:[(0,s.jsxs)(c.default,{onClick:r,className:"flex-1 text-sm",children:[(0,s.jsx)(V,{size:16,className:"mr-2"}),t.isNew?"Create":"Save Changes"]}),(0,s.jsx)(c.default,{onClick:d,className:"flex-1 text-sm btn-secondary",children:"Cancel"})]})]})})]})}function z(e){let{patterns:t,loading:a,selectedVersion:l,setSelectedVersion:r,overview:d,availableHandlers:o,availableIntents:m,editingItem:x,setEditingItem:p,onSaveItem:h,onDataChange:u}=e,[g,f]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[S,Z]=(0,n.useState)(""),V=t.filter(e=>{let t=!g||e.pattern.toLowerCase().includes(g.toLowerCase())||e.handler.toLowerCase().includes(g.toLowerCase())||e.intent.toLowerCase().includes(g.toLowerCase())||e.phrases&&e.phrases.some(e=>e.toLowerCase().includes(g.toLowerCase())),a=!v||e.handler===v,s=!S||e.intent===S;return t&&a&&s}),z=async e=>{if(confirm("Are you sure you want to delete this pattern?"))try{await i.q.deletePattern(e.id),u()}catch(e){console.error("Failed to delete pattern:",e),alert("Failed to delete pattern")}},A=[{label:"View",icon:(0,s.jsx)(b.Z,{size:14}),onClick:e=>p({type:"pattern",item:e,isNew:!1}),variant:"secondary"},{label:"Edit",icon:(0,s.jsx)(y.Z,{size:14}),onClick:e=>p({type:"pattern",item:e,isNew:!1}),variant:"primary"},{label:"Delete",icon:(0,s.jsx)(N.Z,{size:14}),onClick:z,variant:"danger"}];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"card p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:flex-wrap gap-3 lg:gap-4 lg:items-center",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Configuration Version"}),(0,s.jsxs)("select",{value:l,onChange:e=>r(e.target.value),className:"input w-full sm:w-48 text-sm",children:[(null==d?void 0:d.activeVersion)&&(0,s.jsxs)("option",{value:d.activeVersion.id,children:[d.activeVersion.name," (Active)"]}),(null==d?void 0:d.candidateVersion)&&(0,s.jsxs)("option",{value:d.candidateVersion.id,children:[d.candidateVersion.name," (Candidate)"]})]})]}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Search"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:16}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Search patterns...",className:"input pl-10 w-full sm:w-64 text-sm"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 lg:flex lg:gap-4",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Handler"}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"input w-full sm:w-40 text-sm",children:[(0,s.jsx)("option",{value:"",children:"All Handlers"}),o.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Intent"}),(0,s.jsxs)("select",{value:S,onChange:e=>Z(e.target.value),className:"input w-full sm:w-40 text-sm",children:[(0,s.jsx)("option",{value:"",children:"All Intents"}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsx)("div",{className:"lg:ml-auto",children:(0,s.jsxs)(c.default,{onClick:()=>{p({type:"pattern",item:{id:"",handler:"",intent:"",kind:"positive",pattern:"",priority:100,enabled:!0,scope_school_id:void 0,created_at:"",updated_at:"",phrases:[""]},isNew:!0})},className:"flex items-center gap-2 w-full sm:w-auto text-sm",children:[(0,s.jsx)(k.Z,{size:16}),"Add Pattern"]})})]})}),(0,s.jsx)("div",{className:"card p-3 sm:p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(C,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs sm:text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Phrase-Friendly Patterns"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300",children:'Patterns now support friendly phrases like "show student details" that are automatically converted to regex. You can create patterns using natural language instead of complex regex expressions.'})]})]})}),(0,s.jsx)(_.Z,{data:V,columns:[{key:"handler",label:"Handler",render:e=>(0,s.jsx)("code",{className:"text-xs sm:text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:e}),width:"120px"},{key:"intent",label:"Intent",render:e=>(0,s.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e}),width:"100px"},{key:"kind",label:"Kind",render:e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs ".concat("positive"===e?"bg-green-100 text-green-800":"negative"===e?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:e}),width:"80px"},{key:"phrases",label:"Phrases",render:(e,t)=>e&&e.length>0?(0,s.jsxs)("div",{className:"max-w-xs sm:max-w-md",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mb-1",children:[e.slice(0,2).map((e,t)=>(0,s.jsxs)("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs",children:['"',e,'"']},t)),e.length>2&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.length-2," more"]})]}),t.regex_confidence&&(0,s.jsx)("div",{className:"flex items-center gap-1 mt-1",children:(0,s.jsxs)("span",{className:"text-xs px-1 py-0.5 rounded ".concat(t.regex_confidence>=.8?"bg-green-100 text-green-700":t.regex_confidence>=.6?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[Math.round(100*t.regex_confidence),"%"]})})]}):(0,s.jsxs)("div",{className:"max-w-xs sm:max-w-md",children:[(0,s.jsx)("code",{className:"text-xs bg-neutral-50 dark:bg-neutral-800 p-1 rounded block truncate",title:t.pattern,children:t.pattern}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Raw regex"})]})},{key:"priority",label:"Priority",width:"80px",render:e=>(0,s.jsx)("span",{className:"text-xs sm:text-sm",children:e})},{key:"enabled",label:"Status",render:e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e?"Enabled":"Disabled"}),width:"80px"}],actions:A,loading:a,emptyMessage:"No patterns found",className:"overflow-x-auto"}),x&&"pattern"===x.type&&(0,s.jsx)(P,{item:x,availableHandlers:o,availableIntents:m,onSave:h,onClose:()=>p(null),onChange:p})]})}function A(e){let{item:t,availableHandlers:a,availableIntents:l,onSave:r,onClose:d,onChange:o}=e,[m,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)(l);(0,n.useEffect)(()=>{(async()=>{if(t.item.handler){x(!0);try{let e=await i.q.getAvailableIntents(t.item.handler);h(e.intents)}catch(e){console.error("Failed to load intents for handler:",e),h(l)}finally{x(!1)}}else h(l)})()},[t.item.handler,l]);let u=(e,a)=>{o({...t,item:{...t.item,[e]:a}})};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:d}),(0,s.jsx)("div",{className:"relative bg-white dark:bg-neutral-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 sm:mb-6",children:[(0,s.jsxs)("h2",{className:"text-lg sm:text-xl font-bold",children:[t.isNew?"Add":"Edit"," Template"]}),(0,s.jsx)(c.default,{onClick:d,className:"text-sm btn-secondary",children:(0,s.jsx)(S.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Handler"}),(0,s.jsxs)("select",{value:t.item.handler,onChange:e=>u("handler",e.target.value),className:"input text-sm",children:[(0,s.jsx)("option",{value:"",children:"Select handler..."}),a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Intent"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:t.item.intent||"",onChange:e=>u("intent",e.target.value),className:"input text-sm",disabled:m,children:[(0,s.jsx)("option",{value:"",children:m?"Loading intents...":t.item.handler?"Select intent...":"Select handler first..."}),p.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),m&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),t.item.handler&&0===p.length&&!m&&(0,s.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:['No intents found for "',t.item.handler,'" handler']})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Template Type"}),(0,s.jsxs)("select",{value:t.item.template_type,onChange:e=>u("template_type",e.target.value),className:"input text-sm",children:[(0,s.jsx)("option",{value:"system",children:"System"}),(0,s.jsx)("option",{value:"user",children:"User"}),(0,s.jsx)("option",{value:"fallback_context",children:"Fallback Context"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label text-sm",children:"Template Text"}),(0,s.jsx)("textarea",{value:t.item.template_text,onChange:e=>u("template_text",e.target.value),placeholder:"Enter template text...",className:"input min-h-[200px] text-sm",rows:8}),(0,s.jsxs)("p",{className:"text-xs text-neutral-500 mt-1",children:["You can use variables like ","{user_message}",", ","{context}",", etc."]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.item.enabled,onChange:e=>u("enabled",e.target.checked),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:"Enabled"})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6 pt-4 border-t",children:[(0,s.jsxs)(c.default,{onClick:r,className:"flex-1 text-sm",children:[(0,s.jsx)(V,{size:16,className:"mr-2"}),t.isNew?"Create":"Save Changes"]}),(0,s.jsx)(c.default,{onClick:d,className:"flex-1 text-sm btn-secondary",children:"Cancel"})]})]})})]})}function M(e){let{templates:t,loading:a,selectedVersion:l,setSelectedVersion:r,overview:d,availableHandlers:o,availableIntents:m,editingItem:x,setEditingItem:p,onSaveItem:h,onDataChange:u}=e,[g,f]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[C,S]=(0,n.useState)(""),Z=t.filter(e=>{let t=!g||e.template_text.toLowerCase().includes(g.toLowerCase())||e.handler.toLowerCase().includes(g.toLowerCase())||e.intent&&e.intent.toLowerCase().includes(g.toLowerCase()),a=!v||e.handler===v,s=!C||e.intent===C;return t&&a&&s}),V=async e=>{if(confirm("Are you sure you want to delete this template?"))try{await i.q.deleteTemplate(e.id),u()}catch(e){console.error("Failed to delete template:",e),alert("Failed to delete template")}},P=[{key:"handler",label:"Handler",render:e=>(0,s.jsx)("code",{className:"text-xs sm:text-sm bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:e}),width:"150px"},{key:"intent",label:"Intent",render:e=>(0,s.jsx)("span",{className:"text-xs sm:text-sm",children:e||"-"}),width:"120px"},{key:"template_type",label:"Type",render:e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:e}),width:"100px"},{key:"template_text",label:"Template",render:e=>(0,s.jsx)("div",{className:"max-w-xs sm:max-w-md text-xs sm:text-sm",children:(0,s.jsx)("div",{className:"truncate",title:e,children:e})})},{key:"enabled",label:"Status",render:e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e?"Enabled":"Disabled"}),width:"80px"}],z=[{label:"View",icon:(0,s.jsx)(b.Z,{size:14}),onClick:e=>p({type:"template",item:e,isNew:!1}),variant:"secondary"},{label:"Edit",icon:(0,s.jsx)(y.Z,{size:14}),onClick:e=>p({type:"template",item:e,isNew:!1}),variant:"primary"},{label:"Delete",icon:(0,s.jsx)(N.Z,{size:14}),onClick:V,variant:"danger"}];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"card p-3 sm:p-4",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:flex-wrap gap-3 lg:gap-4 lg:items-center",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Configuration Version"}),(0,s.jsxs)("select",{value:l,onChange:e=>r(e.target.value),className:"input w-full sm:w-48 text-sm",children:[(null==d?void 0:d.activeVersion)&&(0,s.jsxs)("option",{value:d.activeVersion.id,children:[d.activeVersion.name," (Active)"]}),(null==d?void 0:d.candidateVersion)&&(0,s.jsxs)("option",{value:d.candidateVersion.id,children:[d.candidateVersion.name," (Candidate)"]})]})]}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Search"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:16}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Search templates...",className:"input pl-10 w-full sm:w-64 text-sm"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 lg:flex lg:gap-4",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Handler"}),(0,s.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"input w-full sm:w-40 text-sm",children:[(0,s.jsx)("option",{value:"",children:"All Handlers"}),o.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium mb-1",children:"Intent"}),(0,s.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"input w-full sm:w-40 text-sm",children:[(0,s.jsx)("option",{value:"",children:"All Intents"}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsx)("div",{className:"lg:ml-auto",children:(0,s.jsxs)(c.default,{onClick:()=>{p({type:"template",item:{id:"",handler:"",intent:"",template_type:"user",template_text:"",enabled:!0,created_at:"",updated_at:""},isNew:!0})},className:"flex items-center gap-2 w-full sm:w-auto text-sm",children:[(0,s.jsx)(k.Z,{size:16}),"Add Template"]})})]})}),(0,s.jsx)(_.Z,{data:Z,columns:P,actions:z,loading:a,emptyMessage:"No templates found",className:"overflow-x-auto"}),x&&"template"===x.type&&(0,s.jsx)(A,{item:x,availableHandlers:o,availableIntents:m,onSave:h,onClose:()=>p(null),onChange:p})]})}function L(){return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"card p-4 sm:p-6",children:[(0,s.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Configuration Analytics"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-neutral-600 mb-3 sm:mb-4",children:"View detailed routing logs and analytics in the Logs section."}),(0,s.jsx)(c.default,{onClick:()=>window.location.href="/admin/logs",className:"text-sm",children:"View Detailed Logs"})]})})}function T(e){let{activeTab:t,overview:a,onOverviewRefresh:l}=e,[r,c]=(0,n.useState)([]),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)(""),[u,g]=(0,n.useState)([]),[f,v]=(0,n.useState)([]),[b,y]=(0,n.useState)(null);(0,n.useEffect)(()=>{(null==a?void 0:a.activeVersion)&&h(a.activeVersion.id)},[a]),(0,n.useEffect)(()=>{N()},[]),(0,n.useEffect)(()=>{p&&("patterns"===t||"templates"===t)&&w()},[p,t]);let N=async()=>{try{let[e,t]=await Promise.all([i.q.getAvailableHandlers(),i.q.getAvailableIntents()]);g(e.handlers),v(t.intents)}catch(e){console.error("Failed to load available options:",e)}},w=async()=>{if(p)try{if(x(!0),"patterns"===t){let e=await i.q.getPatterns(p);c(e)}else if("templates"===t){let e=await i.q.getTemplates(p);o(e)}}catch(e){console.error("Failed to load data:",e)}finally{x(!1)}},k=async()=>{if(b)try{if("pattern"===b.type){let e=b.item;b.isNew?await i.q.createPattern(p,{handler:e.handler,intent:e.intent,kind:e.kind,pattern:e.pattern,priority:e.priority,enabled:e.enabled,scope_school_id:e.scope_school_id,...e.phrases&&{phrases:e.phrases}}):await i.q.updatePattern(e.id,{handler:e.handler,intent:e.intent,kind:e.kind,pattern:e.pattern,priority:e.priority,enabled:e.enabled,scope_school_id:e.scope_school_id,...e.phrases&&{phrases:e.phrases}})}else{let e=b.item;b.isNew?await i.q.createTemplate(p,{handler:e.handler,intent:e.intent,template_type:e.template_type,template_text:e.template_text,enabled:e.enabled}):await i.q.updateTemplate(e.id,{handler:e.handler,intent:e.intent,template_type:e.template_type,template_text:e.template_text,enabled:e.enabled})}y(null),w(),l()}catch(e){console.error("Failed to save item:",e),alert("Failed to save changes")}};return"overview"===t&&a?(0,s.jsx)(j,{overview:a}):"patterns"===t?(0,s.jsx)(z,{patterns:r,loading:m,selectedVersion:p,setSelectedVersion:h,overview:a,availableHandlers:u,availableIntents:f,editingItem:b,setEditingItem:y,onSaveItem:k,onDataChange:w}):"templates"===t?(0,s.jsx)(M,{templates:d,loading:m,selectedVersion:p,setSelectedVersion:h,overview:a,availableHandlers:u,availableIntents:f,editingItem:b,setEditingItem:y,onSaveItem:k,onDataChange:w}):"analytics"===t?(0,s.jsx)(L,{}):null}function H(e){let{cacheStatus:t}=e;return(0,s.jsx)("div",{className:"card p-3 sm:p-4 mb-4 sm:mb-6 border-orange-200 bg-orange-50 dark:bg-orange-900/20",children:(0,s.jsxs)("div",{className:"flex items-start gap-2 sm:gap-3 text-orange-800 dark:text-orange-200",children:[(0,s.jsx)(u.Z,{size:18,className:"mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm sm:text-base",children:"System Health Warning"}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm",children:["Configuration cache status: ",t,". Consider reloading the cache."]})]})]})})}function D(){var e,t,a;let{user:o}=(0,l.a)(),[m,x]=(0,n.useState)(null),[p,h]=(0,n.useState)(!0),[u,g]=(0,n.useState)("overview");(0,n.useEffect)(()=>{f()},[]);let f=async()=>{try{var e,t,a,s;h(!0);let[n,l,r]=await Promise.all([i.q.getVersions(),i.q.getStats(),i.q.getCacheStats().catch(()=>({status:"error"}))]),c=n.find(e=>"active"===e.status)||null,d=n.find(e=>"candidate"===e.status)||null;x({activeVersion:c,candidateVersion:d,totalPatterns:(null===(e=l.patterns)||void 0===e?void 0:e.total)||0,totalTemplates:(null===(t=l.templates)||void 0===t?void 0:t.total)||0,enabledPatterns:(null===(a=l.patterns)||void 0===a?void 0:a.enabled)||0,enabledTemplates:(null===(s=l.templates)||void 0===s?void 0:s.enabled)||0,systemHealth:"loaded"===r.status?"healthy":"warning",cacheStatus:r.status||"error"})}catch(e){console.error("Failed to load configuration overview:",e)}finally{h(!1)}},v=async()=>{try{await i.q.reloadConfig(),alert("Configuration cache reloaded successfully"),f()}catch(e){console.error("Failed to reload cache:",e),alert("Failed to reload configuration")}};return(null==o?void 0:null===(e=o.permissions)||void 0===e?void 0:e.can_manage_intent_config)||(null==o?void 0:null===(t=o.permissions)||void 0===t?void 0:t.is_admin)||(null==o?void 0:null===(a=o.permissions)||void 0===a?void 0:a.is_super_admin)?p?(0,s.jsx)(d,{size:"lg",text:"Loading configuration..."}):(0,s.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Configuration Management"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-neutral-600",children:"View and manage all intent patterns, templates, and system configuration"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(c.default,{onClick:v,className:"btn-secondary flex items-center gap-2 text-sm",children:[(0,s.jsx)(r.Z,{size:16}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Reload Cache"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Reload"})]})})]}),m&&"healthy"!==m.systemHealth&&(0,s.jsx)(H,{cacheStatus:m.cacheStatus}),(0,s.jsx)("div",{className:"border-b border-neutral-200 dark:border-neutral-700 mb-4 sm:mb-6",children:(0,s.jsx)("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto",children:["overview","patterns","templates","analytics"].map(e=>(0,s.jsx)("button",{onClick:()=>g(e),className:"py-2 px-1 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ".concat(u===e?"border-[--color-brand] text-[--color-brand]":"border-transparent text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,s.jsx)(T,{activeTab:u,overview:m,onOverviewRefresh:f})]}):(0,s.jsx)("div",{className:"p-4 sm:p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"You don't have permission to manage intent configuration."})]})})}},8030:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var s=a(2265);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:m,iconNode:x,...p}=e;return(0,s.createElement)("svg",{ref:t,...d,width:n,height:n,stroke:a,strokeWidth:i?24*Number(l)/Number(n):l,className:r("lucide",o),...!m&&!c(p)&&{"aria-hidden":"true"},...p},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,s.createElement)(o,{ref:l,iconNode:t,className:r("lucide-".concat(n(i(e))),"lucide-".concat(e),c),...d})});return a.displayName=i(e),a}},4207:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},518:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7592:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6780:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2940:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5733:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7390:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},8094:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},2513:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6706:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4258:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6649:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},497:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]])},883:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},4697:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9541:function(e,t,a){"use strict";a.d(t,{q:function(){return l}});var s=a(459);class n{async getConfigurationOverview(){return(await s.x.get("/api/admin/configuration/overview")).data}async getCacheStats(){return(await s.x.get("/api/admin/configuration/cache/stats")).data}async reloadCache(){return(await s.x.post("/api/admin/configuration/cache/reload")).data}async getVersions(){return(await s.x.get("/api/admin/intent-config/versions")).data}async createVersion(e){return(await s.x.post("/api/admin/intent-config/versions",e)).data}async promoteVersion(e){return(await s.x.post("/api/admin/intent-config/versions/".concat(e,"/promote"))).data}async archiveVersion(e){return(await s.x.post("/api/admin/intent-config/versions/".concat(e,"/archive"))).data}async getPatterns(e,t){let a=new URLSearchParams;return(null==t?void 0:t.handler)&&a.append("handler",t.handler),(null==t?void 0:t.intent)&&a.append("intent",t.intent),(null==t?void 0:t.kind)&&a.append("kind",t.kind),(await s.x.get("/api/admin/intent-config/versions/".concat(e,"/patterns?").concat(a.toString()))).data}async createPattern(e,t){return(await s.x.post("/api/admin/intent-config/versions/".concat(e,"/patterns"),t)).data}async updatePattern(e,t){return(await s.x.put("/api/admin/intent-config/patterns/".concat(e),t)).data}async deletePattern(e){return(await s.x.delete("/api/admin/intent-config/patterns/".concat(e))).data}async enablePattern(e){return(await s.x.post("/api/admin/intent-config/patterns/".concat(e,"/enable"))).data}async testPatternWithPhrases(e,t){return(await s.x.post("/api/admin/intent-config/patterns/".concat(e,"/test-phrases"),t)).data}async improvePattern(e,t,a){return(await s.x.post("/api/admin/intent-config/patterns/".concat(e,"/improve"),{missed_phrases:t,false_positives:a})).data}async testPattern(e,t){return(await s.x.post("/api/admin/intent-config/patterns/".concat(e,"/test"),{test_message:t})).data}async getTemplates(e,t){let a=new URLSearchParams;return(null==t?void 0:t.handler)&&a.append("handler",t.handler),(null==t?void 0:t.template_type)&&a.append("template_type",t.template_type),(await s.x.get("/api/admin/intent-config/versions/".concat(e,"/templates?").concat(a.toString()))).data}async createTemplate(e,t){return(await s.x.post("/api/admin/intent-config/versions/".concat(e,"/templates"),t)).data}async updateTemplate(e,t){return(await s.x.put("/api/admin/intent-config/templates/".concat(e),t)).data}async deleteTemplate(e){return(await s.x.delete("/api/admin/intent-config/templates/".concat(e))).data}async enableTemplate(e){return(await s.x.post("/api/admin/intent-config/templates/".concat(e,"/enable"))).data}async testClassify(e){return(await s.x.post("/api/admin/intent-config/test-classify",e)).data}async reloadConfig(){return(await s.x.post("/api/admin/intent-config/reload")).data}async getStats(){return(await s.x.get("/api/admin/intent-config/stats")).data}async getAvailableHandlers(){return(await s.x.get("/api/admin/intent-config/handlers")).data}async getAvailableIntents(e){return(await s.x.get("/api/admin/intent-config/intents".concat(e?"?handler=".concat(e):""))).data}async getPatternKinds(){return(await s.x.get("/api/admin/intent-config/pattern-kinds")).data}async getTemplateTypes(){return(await s.x.get("/api/admin/intent-config/template-types")).data}async generateRegexFromPhrases(e){console.log("\uD83D\uDD0D Sending regex generation request:",e);try{let t=await s.x.post("/api/admin/intent-config/generate-regex",e);console.log("\uD83D\uDD0D Raw API response:",t.data);let a={phrases:t.data.phrases||e.phrases,intent:t.data.intent||e.intent,pattern_kind:t.data.pattern_kind||e.pattern_kind||"positive",generated_regex:t.data.generated_regex||t.data.regex||"",confidence:t.data.confidence||0,explanation:t.data.explanation||"",test_matches:t.data.test_matches||[],errors:t.data.errors||[]};return console.log("\uD83D\uDD0D Processed regex generation response:",a),a}catch(e){throw console.error("‚ùå Regex generation API error:",e),e}}async exportConfiguration(e,t){return(await s.x.get("/api/admin/intent-config/versions/".concat(e,"/export?format=").concat(t),{responseType:"blob"})).data}async validateConfiguration(e){return(await s.x.post("/api/admin/intent-config/versions/".concat(e,"/validate"))).data}}let l=new n},4839:function(e,t,a){"use strict";function s(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=function e(t){var a,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(s=e(t[a]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s}a.d(t,{W:function(){return s}}),t.Z=s}},function(e){e.O(0,[236,745,971,23,744],function(){return e(e.s=4479)}),_N_E=e.O()}]);